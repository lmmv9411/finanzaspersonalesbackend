import{C as B,p as C,f as E,g as S,L as F,h as L,j,P as A,k as q}from"./index-Di_oTTvc.js";import{j as I,l as O,h as b,H as T,y as _,q as l,i as G,m as N,c as p,a as t,t as n,b as P,u as d,F as V,r as H,o as u}from"./index-BPdY78-P.js";const z=async()=>await I.get("/stats/monthly"),J=O("monthlyReport",()=>{const i=b([]);return{monthlyData:i,fetchMonthlyReport:async()=>{i.value=await z()}}}),K={class:"p-2"},Q={class:"text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-4"},U={class:"bg-slate-100 dark:bg-gray-800 p-4 rounded-lg shadow-md"},W={class:"mt-8"},X={class:"overflow-x-auto"},Y={class:"min-w-full bg-white dark:bg-gray-700 rounded-lg shadow-md"},Z={class:"py-2 px-4 border-b border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200"},$={class:"py-2 px-4 border-b border-gray-300 dark:border-gray-600 text-green-500 dark:text-green-400"},tt={class:"py-2 px-4 border-b border-gray-300 dark:border-gray-600 text-red-500 dark:text-red-400"},et={class:"py-2 px-4 border-b border-gray-300 dark:border-gray-600 text-indigo-500 dark:text-indigo-300"},ot={__name:"MonthlyReport",setup(i){B.register(C,E,S,F,L,j,A);const g=new Intl.DateTimeFormat(navigator.language,{month:"long"}),h=T(),s=J(),c=b(h.query.type||"ingreso"),m=_(()=>{switch(c.value){case"ingreso":return"Ingresos";case"gasto":return"Gastos";case"saldo":return"Saldo";default:return""}}),v=a=>{const[e,r]=a.split("-"),o=new Date(e,r-1,1);return g.format(o)},w=_(()=>{var x,k;const a=Object.keys(((x=s.monthlyData)==null?void 0:x.data)??{}).map(f=>{const[y,D]=f.split("-"),R=new Date(y,D-1,1);return g.format(R)});let e=[];((k=s.monthlyData)==null?void 0:k.data)!==void 0&&(e=Object.entries(s.monthlyData.data).map(([f,y])=>y[c.value]));let r,o;switch(c.value){case"ingreso":r="#4CAF50",o="#81C784";break;case"gasto":r="#F44336",o="#EF9A9A";break;case"saldo":r="#3F51B5",o="#7986CB";break;default:r="#9E9E9E",o="#E0E0E0"}return{labels:a,datasets:[{label:m.value,backgroundColor:o,borderColor:r,data:e,tension:.3}]}}),M=b({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,labels:{color:"#6B7280"}},tooltip:{callbacks:{label:function(a){let e=a.dataset.label||"";return e&&(e+=": "),a.parsed.y!==null&&(e+=l(a.parsed.y)),e}}}},scales:{x:{ticks:{color:"#6B7280"},grid:{color:"#6B7280"}},y:{ticks:{color:"#6B7280",callback:function(a){return l(a)}},grid:{color:"#6B7280"}}}});return G(()=>{s.fetchMonthlyReport()}),N(()=>h.query.type,a=>{c.value=a||"ingreso"}),(a,e)=>(u(),p("div",K,[t("h1",Q,"Reporte Mensual de "+n(m.value),1),t("div",U,[P(d(q),{data:w.value,options:M.value},null,8,["data","options"])]),t("div",W,[e[1]||(e[1]=t("h2",{class:"text-xl font-semibold text-gray-800 dark:text-gray-200 mb-4"},"Detalle Mensual",-1)),t("div",X,[t("table",Y,[e[0]||(e[0]=t("thead",null,[t("tr",null,[t("th",{class:"py-2 px-4 border-b dark:border-gray-600 text-left text-gray-600 dark:text-gray-300"}," Mes"),t("th",{class:"py-2 px-4 border-b dark:border-gray-600 text-left text-gray-600 dark:text-gray-300"}," Ingresos"),t("th",{class:"py-2 px-4 border-b dark:border-gray-600 text-left text-gray-600 dark:text-gray-300"}," Gastos"),t("th",{class:"py-2 px-4 border-b dark:border-gray-600 text-left text-gray-600 dark:text-gray-300"}," Saldo")])],-1)),t("tbody",null,[(u(!0),p(V,null,H(d(s).monthlyData.data,(r,o)=>(u(),p("tr",{key:o,class:"hover:bg-gray-50 dark:hover:bg-gray-600"},[t("td",Z,n(v(o)),1),t("td",$,n(d(l)(r.ingreso)),1),t("td",tt,n(d(l)(r.gasto)),1),t("td",et,n(d(l)(r.saldo)),1)]))),128))])])])])]))}};export{ot as default};
