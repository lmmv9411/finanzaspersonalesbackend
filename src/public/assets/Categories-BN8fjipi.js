import{c as d,o as u,a as r,r as v,f as k,g as C,M as E,j as c,i as V,d as s,b as A,l as w,K as M,F as x,k as S,I as y,t as _}from"./index-Bk6c8noU.js";import{S as a,_ as $,a as b}from"./BaseInput-tKwdVEdD.js";import{u as B}from"./categoriesStore-DnpIcdkm.js";function N(o,n){return u(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{d:"M13.488 2.513a1.75 1.75 0 0 0-2.475 0L6.75 6.774a2.75 2.75 0 0 0-.596.892l-.848 2.047a.75.75 0 0 0 .98.98l2.047-.848a2.75 2.75 0 0 0 .892-.596l4.261-4.262a1.75 1.75 0 0 0 0-2.474Z"}),r("path",{d:"M4.75 3.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V9A.75.75 0 0 1 14 9v2.25A2.75 2.75 0 0 1 11.25 14h-6.5A2.75 2.75 0 0 1 2 11.25v-6.5A2.75 2.75 0 0 1 4.75 2H7a.75.75 0 0 1 0 1.5H4.75Z"})])}function U(o,n){return u(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"fill-rule":"evenodd",d:"M5 3.25V4H2.75a.75.75 0 0 0 0 1.5h.3l.815 8.15A1.5 1.5 0 0 0 5.357 15h5.285a1.5 1.5 0 0 0 1.493-1.35l.815-8.15h.3a.75.75 0 0 0 0-1.5H11v-.75A2.25 2.25 0 0 0 8.75 1h-1.5A2.25 2.25 0 0 0 5 3.25Zm2.25-.75a.75.75 0 0 0-.75.75V4h3v-.75a.75.75 0 0 0-.75-.75h-1.5ZM6.05 6a.75.75 0 0 1 .787.713l.275 5.5a.75.75 0 0 1-1.498.075l-.275-5.5A.75.75 0 0 1 6.05 6Zm3.9 0a.75.75 0 0 1 .712.787l-.275 5.5a.75.75 0 0 1-1.498-.075l.275-5.5a.75.75 0 0 1 .786-.711Z","clip-rule":"evenodd"})])}function Z(){const o=v(""),n=v(!1);let l=null;const i=B(),m=async()=>{if(n.value){p(l);return}try{if(o.value===""){a.fire({title:"Nombre Vacío",icon:"error",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"});return}a.fire({title:"Creando...",allowOutsideClick:!1,didOpen:()=>{a.showLoading()},theme:"auto"}),await C.post("/categories",{name:o.value}),a.fire({title:"Categoria Creada",icon:"success",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"}),o.value="",i.getCategories()}catch(t){console.error("Error creating category:",t),a.fire({title:"Error al crear categoria",text:t.response.data.error,icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}},f=async t=>{try{if(!(await a.fire({title:"Eliminar Categoria?",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",theme:"auto"})).isConfirmed){a.fire({title:"No se eliminó!",icon:"info",timer:2e3,theme:"auto",toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0});return}a.fire({title:"Eliminando...",allowOutsideClick:!1,didOpen:()=>{a.showLoading()},theme:"auto"}),await C.delete(`/categories/${t}`),i.getCategories(),a.fire({title:"Categoria Eliminada",icon:"success",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"})}catch(e){console.error("Error deleting category:",e),a.fire({title:"Error al eliminar categoria",text:e.response.data.error,icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}},g=t=>{const e=i.categories.findIndex(h=>h.id===t);e!==-1&&(o.value=i.categories[e].name,i.categories.splice(e,1),n.value=!0,l=t)},p=async t=>{try{const e=await C.put(`/categories/${t}`,{name:o.value});console.log("Category updated:",e.data),i.getCategories(),n.value=!1,l=null,o.value=""}catch(e){console.error("Error updating category:",e)}};return k(async()=>i.getCategories()),{name:o,createCategory:m,deleteCategory:f,updateCategory:p,onUpdateCategory:g,isUpdate:n}}const H={class:"flex flex-col gap-8"},L={class:"flex gap-2"},O={class:"container max-w-xs mx-auto flex gap-4 flex-col"},P={class:"text-xl border gap-4 border-gray-200 dark:border-gray-600 rounded-lg flex justify-between p-4 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors duration-300 shadow-sm"},T={class:"flex gap-2"},j=["onClick"],D=["onClick"],I={__name:"Categories",setup(o){const n=B(),{name:l,createCategory:i,deleteCategory:m,onUpdateCategory:f,isUpdate:g}=Z();return(p,t)=>(u(),d(x,null,[t[3]||(t[3]=r("h1",{class:"dark:text-white font-bold text-xl"},"Categorias",-1)),r("div",H,[r("form",{onSubmit:t[1]||(t[1]=E((...e)=>s(i)&&s(i)(...e),["prevent"])),class:"shadow-md p-2 rounded dark:bg-gray-800 bg-slate-100 flex gap-2 dark:text-gray-300 items-start w-fit m-auto"},[c($,{modelValue:s(l),"onUpdate:modelValue":t[0]||(t[0]=e=>V(l)?l.value=e:null),modelModifiers:{trim:!0},placeholder:"Nombre de categoria"},null,8,["modelValue"]),r("div",L,[c(b,{type:"submit"},{default:w(()=>[y(_(s(g)?"Actualizar":"Crear"),1)]),_:1}),A(c(b,{type:"cancel",color:"danger"},{default:w(()=>t[2]||(t[2]=[y("Cancelar")])),_:1},512),[[M,s(g)]])])],32),r("div",O,[(u(!0),d(x,null,S(s(n).categories,e=>(u(),d("div",{key:e.id},[r("div",P,[r("span",null,_(e.name),1),r("div",T,[r("button",{onClick:h=>s(m)(e.id),class:"text-red-500 hover:text-red-700 cursor-pointer",title:"Eliminar categoria"},[c(s(U),{class:"h-5 w-5"})],8,j),r("button",{onClick:h=>s(f)(e.id),class:"text-blue-500 hover:text-blue-700 cursor-pointer",title:"Editar categoria"},[c(s(N),{class:"h-5 w-5"})],8,D)])])]))),128))])])],64))}};export{I as default};
