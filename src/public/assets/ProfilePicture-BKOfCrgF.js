import{c as d,o as f,a as t,r as n,B as c,b as v,d as m,t as b,f as u,w,u as x,k}from"./index-CEyakhXV.js";import{_ as y}from"./BaseButton-BkiUUvn4.js";import{_ as C}from"./ToggleTheme-xMg_4bSH.js";function S(p,a){return f(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})])}const $={class:"min-w-xs mx-auto mt-10 p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-lg"},B={class:"flex flex-col items-center gap-4"},F=["src"],P=["disabled"],j={__name:"ProfilePictureUploader",setup(p){const a=n(`${c}/uploads/default.jpg`),s=n(null),o=n(null),l=n(null),i=n(!1);function g(){s.value.click()}function _(r){const e=r.target.files[0];e&&(o.value=e,l.value=URL.createObjectURL(e))}async function h(){if(!o.value)return;i.value=!0;const r=new FormData;r.append("image",o.value);try{const{data:e}=await m.post("/user/upload-profile-pic",r,{headers:{"Content-Type":"multipart/form-data"}});e.url?(a.value=`${c}${e.url}`,l.value=null,o.value=null):Swal.fire({title:"Error al subir foto",icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}catch(e){console.error(e),Swal.fire({title:"Error al subir foto",text:e.response.data.error,icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}finally{i.value=!1}}return v(async()=>{const{data:r}=await m.get("/user");a.value=`${c}${r.profilePicture}`}),(r,e)=>(f(),d("div",$,[e[0]||(e[0]=t("h2",{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-100 text-center"},"Subir Foto de Perfil",-1)),t("div",B,[t("img",{src:l.value||a.value,alt:"Foto de perfil",class:"w-32 h-32 rounded-full object-cover border-4 border-gray-300 dark:border-gray-600 shadow"},null,8,F),t("input",{ref_key:"fileInput",ref:s,type:"file",accept:"image/*",class:"hidden",onChange:_},null,544),t("button",{onClick:g,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"}," Seleccionar imagen "),t("button",{onClick:h,disabled:!o.value||i.value,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition"},b(i.value?"Subiendo...":"Guardar"),9,P)])]))}},I={class:"flex flex-col gap-4 items-center"},R={__name:"ProfilePicture",setup(p){const a=x(),s=()=>{localStorage.removeItem("jwt_token"),a.push({name:"Login"})};return(o,l)=>(f(),d("div",I,[u(j),u(y,{onClick:s,class:"flex gap-2 items-center sm:hidden"},{default:w(()=>[u(k(S),{class:"w-5 h-5 inline-block"}),l[0]||(l[0]=t("span",null,"Cerrar SesiÃ³n",-1))]),_:1}),u(C,{class:"sm:hidden"})]))}};export{R as default};
