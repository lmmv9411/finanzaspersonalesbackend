import{c,o as d,a,h as g,N as C,i as S,b as v,n as f,u as i,t as w,w as k,J as V,O as B,F as D,r as M,T as E,P as I,j as _}from"./index-BL5VuITI.js";import{I as y}from"./iconify-DOrx9CrQ.js";import{u as N}from"./categoriesStore-D2-KzUQk.js";import{g as b}from"./icons-BjrsL8W4.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as T,a as j}from"./graphStore-CWLqASXR.js";function F(e,m){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"fill-rule":"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z","clip-rule":"evenodd"})])}const O={class:"w-full"},$={key:0,class:"flex items-center gap-2"},z={key:1},G={class:"max-h-60 p-2 overflow-y-auto mt-1 rounded-md bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 max-h-60"},J={class:"grid grid-cols-4 gap-3"},P=["onClick"],R={class:"text-xs mt-1 text-center"},Z={__name:"CategorySelect",props:{modelValue:Number},emits:["update:modelValue"],setup(e,{emit:m}){const s=e,t=m,p=N(),l=g(!1),u=()=>l.value=!l.value,o=g(null),x=n=>{t("update:modelValue",n.id),o.value=n,l.value=!1};return C(()=>{s.modelValue===0&&(o.value="")}),S(()=>{const n=p.categories.find(h=>h.id===s.modelValue);n&&(o.value=n)}),(n,h)=>(d(),c("div",O,[a("button",{onClick:u,type:"button",class:"w-full flex items-center justify-between p-2 border border-gray-300 rounded-md shadow-sm dark:bg-gray-800 dark:border-gray-700 text-left"},[o.value?(d(),c("div",$,[a("div",{class:f([[i(b)(o.value.icon)],"rounded-full p-1 text-white text-lg"])},[v(i(y),{icon:o.value.icon,class:"w-5 h-5"},null,8,["icon"])],2),a("span",null,w(o.value.name),1)])):(d(),c("span",z,"Selecciona Categoria")),v(i(F),{class:"w-5 h-5 text-gray-400"})]),v(E,{name:"slide-down"},{default:k(()=>[V(a("div",G,[a("div",J,[(d(!0),c(D,null,M(i(p).categories,r=>(d(),c("div",{key:r.id,onClick:q=>x(r),class:f(["flex p-2 flex-col items-center rounded-lg cursor-pointer transition-all",{"bg-primary-100 dark:bg-primary-900 border-2 border-gray-200 dark:border-gray-500":e.modelValue===r.id,"hover:bg-gray-200 dark:hover:bg-gray-700":e.modelValue!==r.id}])},[a("div",{class:f([[i(b)(r.icon)],"rounded-full p-1 text-white text-lg hover:scale-110 duration-200"])},[v(i(y),{icon:r.icon},null,8,["icon"])],2),a("span",R,w(r.name),1)],10,P))),128))])],512),[[B,l.value]])]),_:1})]))}},X=L(Z,[["__scopeId","data-v-c4c967fc"]]),Y=I("movement",()=>{const e=T(),m=j(),s=g(!1),t=g({type:"ingreso",amount:"",description:"",CategoryId:0,date:null});return{saveMovement:async l=>{try{if(!l)await _.post("/movements",t.value);else{const u=new Date(t.value.date);t.value.date=u.toLocaleString("sv-SE"),await _.put(`/movements/${t.value.id}`,t.value)}e.fetchBalance(),m.getTotalByCategory(e.startDate,e.endDate),s.value=!0}catch(u){s.value=!1,console.error("Error al registrar movimiento",u)}},isSaved:s,movement:t}});export{X as C,Y as u};
