import{c,o as d,a as t,h as v,N as C,i as k,b as m,n as f,u as i,t as w,w as S,J as V,O as B,F as D,r as M,T as I,P as N,j as _}from"./index-Dgk1dbwt.js";import{I as y}from"./iconify-CHzzfc5V.js";import{u as E}from"./categoriesStore-CGC0UK8f.js";import{g as b}from"./icons-BjrsL8W4.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as j,a as F}from"./graphStore-7hS6JNEk.js";function L(e,u){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z","clip-rule":"evenodd"})])}const O={class:"w-full"},$={key:0,class:"flex items-center gap-2"},z={key:1},G={class:"max-h-60 p-2 overflow-y-auto mt-1 rounded-md bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 max-h-60"},J={class:"grid grid-cols-4 gap-3"},P=["onClick"],R={class:"text-xs mt-1 text-center"},Z={__name:"CategorySelect",props:{modelValue:Number},emits:["update:modelValue"],setup(e,{emit:u}){const r=e,s=u,g=E(),l=v(!1),p=()=>l.value=!l.value,a=v(null),x=n=>{s("update:modelValue",n.id),a.value=n,l.value=!1};return C(()=>{r.modelValue===0&&(a.value="")}),k(()=>{const n=g.categories.find(h=>h.id===r.modelValue);n&&(a.value=n)}),(n,h)=>(d(),c("div",O,[t("button",{onClick:p,type:"button",class:"w-full flex items-center justify-between p-2 border border-gray-300 rounded-md shadow-sm dark:bg-gray-800 dark:border-gray-700 text-left"},[a.value?(d(),c("div",$,[t("div",{class:f([[i(b)(a.value.icon)],"rounded-full p-1 text-white text-lg"])},[m(i(y),{icon:a.value.icon,class:"w-5 h-5"},null,8,["icon"])],2),t("span",null,w(a.value.name),1)])):(d(),c("span",z,"Selecciona Categoria")),m(i(L),{class:"w-5 h-5 text-gray-400"})]),m(I,{name:"slide-down"},{default:S(()=>[V(t("div",G,[t("div",J,[(d(!0),c(D,null,M(i(g).categories,o=>(d(),c("div",{key:o.id,onClick:q=>x(o),class:f(["flex p-2 flex-col items-center rounded-lg cursor-pointer transition-all",{"bg-primary-100 dark:bg-primary-900 border-2 border-gray-200 dark:border-gray-500":e.modelValue===o.id,"hover:bg-gray-200 dark:hover:bg-gray-700":e.modelValue!==o.id}])},[t("div",{class:f([[i(b)(o.icon)],"rounded-full p-1 text-white text-lg hover:scale-110 duration-200"])},[m(i(y),{icon:o.icon},null,8,["icon"])],2),t("span",R,w(o.name),1)],10,P))),128))])],512),[[B,l.value]])]),_:1})]))}},X=T(Z,[["__scopeId","data-v-c4c967fc"]]),Y=N("movement",()=>{const e=j(),u=F(),r=v(!1),s=v({type:"ingreso",amount:"",description:"",CategoryId:0});return{saveMovement:async l=>{try{l?await _.put(`/movements/${s.value.id}`,s.value):await _.post("/movements",s.value),e.fetchBalance(),u.getTotalByCategory(e.startDate,e.endDate),r.value=!0}catch(p){r.value=!1,console.error("Error al registrar movimiento",p)}},isSaved:r,movement:s}});export{X as C,Y as u};
