import{c as i,o as c,a as s,h as u,I as C,m as S,i as V,b as p,n as h,u as d,t as w,w as D,E as B,J as E,F as I,r as M,T as L,l as N,j as y}from"./index-BPdY78-P.js";import{I as b}from"./iconify-DySoP6t8.js";import{u as j}from"./categoriesStore-RS9JqtRM.js";import{g as _}from"./icons-BjrsL8W4.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";function T(a,e){return c(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"fill-rule":"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z","clip-rule":"evenodd"})])}const $={class:"w-full"},z={key:0,class:"flex items-center gap-2"},J={key:1},O={class:"max-h-60 p-2 overflow-y-auto mt-1 rounded-md bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 max-h-60"},R={class:"grid grid-cols-4 gap-3"},Z=["onClick"],q={class:"mt-1 text-xs block w-full text-center break-words text-wrap"},A={__name:"CategorySelect",props:{modelValue:Number,type:String},emits:["update:modelValue"],setup(a,{emit:e}){const l=a,f=e,t=j(),m=u([]),v=u(!1),x=()=>v.value=!v.value,o=u(null),k=r=>{f("update:modelValue",r.id),o.value=r,v.value=!1};return C(()=>{l.modelValue===0&&(o.value="")}),S(()=>l.type,()=>{m.value=t.categories.filter(r=>r.type===l.type),o.value=""}),V(async()=>{await t.getCategories();const r=t.categories.find(g=>g.id===l.modelValue);r&&(o.value=r),l.type?m.value=t.categories.filter(g=>g.type===l.type):m.value=t.categories}),(r,g)=>(c(),i("div",$,[s("button",{onClick:x,type:"button",class:"w-full flex items-center justify-between p-2 border border-gray-300 rounded-md shadow-sm dark:bg-gray-800 dark:border-gray-700 text-left"},[o.value?(c(),i("div",z,[s("div",{class:h([[d(_)(o.value.icon)],"rounded-full p-1 text-white text-lg"])},[p(d(b),{icon:o.value.icon,class:"w-5 h-5"},null,8,["icon"])],2),s("span",null,w(o.value.name),1)])):(c(),i("span",J,"Selecciona Categoria")),p(d(T),{class:"w-5 h-5 text-gray-400"})]),p(L,{name:"slide-down"},{default:D(()=>[B(s("div",O,[s("div",R,[(c(!0),i(I,null,M(m.value,n=>(c(),i("div",{key:n.id,onClick:G=>k(n),class:h(["flex p-1 flex-col items-center rounded-lg cursor-pointer transition-all",{"bg-primary-100 dark:bg-primary-900 border-2 border-gray-200 dark:border-gray-500":a.modelValue===n.id,"hover:bg-gray-200 dark:hover:bg-gray-700":a.modelValue!==n.id}])},[s("div",{class:h([[d(_)(n.icon)],"rounded-full p-2 text-white text-lg hover:scale-110 duration-200"])},[p(d(b),{icon:n.icon},null,8,["icon"])],2),s("span",q,w(n.name),1)],10,Z))),128))])],512),[[E,v.value]])]),_:1})]))}},W=F(A,[["__scopeId","data-v-9cb99b1a"]]),X=N("movement",()=>{const a=u(!1),e=u({type:"ingreso",amount:"",description:"",CategoryId:0,date:null});return{saveMovement:async f=>{try{if(!f)await y.post("/movements",e.value);else{const t=new Date(e.value.date);e.value.date=t.toLocaleString("sv-SE"),await y.put(`/movements/${e.value.id}`,e.value)}a.value=!0}catch(t){a.value=!1,console.error("Error al registrar movimiento",t)}},isSaved:a,movement:e}});export{W as C,X as u};
