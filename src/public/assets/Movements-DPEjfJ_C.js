import{r as i,w as b,a as f,b as w,A as m,c as u,d as t,e as _,v as M,u as g,i as v,F as x,f as D,o as y,n as h,t as d}from"./index-DgatB2wh.js";const k=()=>{const p=i([]),r=i(""),l=i(""),c=i(""),s=async()=>{try{const a=await w.get(`${m}/movements/date?startDate=${l.value}&endDate=${c.value}`);p.value=a.data}catch(a){console.error("Error al cargar movimientos",a)}},e=function(){const a=new Date,o=a.getFullYear(),n=String(a.getMonth()+1).padStart(2,"0");l.value=`${o}-${n}-01`,c.value=new Date(o,n,0).toISOString().split("T")[0],r.value=`${o}-${n}`};return b(r,a=>{const[o,n]=a.split("-");l.value=`${o}-${n}-01 00:00:00`,c.value=new Date(o,n,0).toISOString().split("T")[0]+" 23:59:59",s()}),f(()=>{e(),s()}),{movements:p,fetchMovements:s,selectedMonth:r}},S={class:"shadow-md p-2 rounded dark:bg-gray-800 bg-slate-100 flex gap-2 dark:text-gray-300 items-start sm:flex-row sm:items-end sm:w-fit m-auto flex-wrap"},$={class:"flex-1"},F={class:"w-full max-w-4xl mx-auto p-4 overflow-x-auto"},C={class:"dark:text-white w-full table-auto border-collapse whitespace-nowrap"},A={class:"px-4 py-2"},B={class:"px-4 py-2"},I={class:"px-4 py-2"},O={class:"px-4 py-2"},E={__name:"Movements",setup(p){const{selectedMonth:r,movements:l}=k();return(c,s)=>(y(),u(x,null,[s[3]||(s[3]=t("h2",{class:"mx-auto dark:text-white w-fit text-2xl font-semibold mt-4"},"Movimientos Registrados",-1)),t("div",S,[t("div",$,[s[1]||(s[1]=t("label",{for:"selectedMonth",class:"block text-gray-700 dark:text-gray-300"},"Filtrar Mes",-1)),_(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>v(r)?r.value=e:null),type:"month",id:"selectedMonth",class:"p-2 border border-gray-300 dark:bg-gray-900 dark:border-gray-700 border-2 focus:border-gray-300 focus:outline-none focus:border-gray-500 transition-colors duration-300 rounded"},null,512),[[M,g(r)]])])]),t("div",F,[t("table",C,[s[2]||(s[2]=t("thead",null,[t("tr",{class:"border-b border-gray-400"},[t("th",{class:"px-4 py-2"},"Tipo"),t("th",{class:"px-4 py-2"},"Monto"),t("th",{class:"px-4 py-2"},"Descripción"),t("th",{class:"px-4 py-2"},"Categoría"),t("th",{class:"px-4 py-2"},"Fecha")])],-1)),t("tbody",null,[(y(!0),u(x,null,D(g(l),e=>{var a;return y(),u("tr",{key:e.id,class:"border-b border-gray-300"},[t("td",A,[t("span",{class:h(["font-bold",{"text-green-600":e.type==="ingreso","text-red-600":e.type!=="ingreso"}])},d(e.type),3)]),t("td",{class:h(["px-4 py-2",{"text-green-600":e.type==="ingreso","text-red-600":e.type!=="ingreso"}])},d(new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}).format(e.type==="gasto"?e.amount*-1:e.amount)),3),t("td",B,d(e.description),1),t("td",I,d((a=e.Category)==null?void 0:a.name),1),t("td",O,d(new Date(e.createdAt).toLocaleString()),1)])}),128))])])])],64))}};export{E as default};
