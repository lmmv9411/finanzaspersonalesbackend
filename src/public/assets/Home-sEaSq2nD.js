import{u as ne,a as oe}from"./graphStore-Dpde9L3_.js";import{_ as se}from"./BaseInput-B1xAGFec.js";import{i as j,f as le,c as G,o as w,a as h,b as _,u as c,w as T,t as D,l as z,n as de,d as L,m as ue}from"./index-CGu822fW.js";import{r as fe,a as ve,b as he}from"./CurrencyDollarIcon-CkWxo4cJ.js";import{m as S,r as v,v as ce,c as X,i as k,t as xe,d as ye,a as _e,A as K,P as pe,B as me,b as be,e as ge,C as we,p as ke,f as Me,g as Ce,D as V}from"./index-qePdx_5V.js";import{u as Se}from"./categoriesStore-CNJgLoXL.js";const Ie={class:"grid gap-4 grid-cols-2 sm:grid-cols-5 sm:items-start"},Pe={class:"col-span-full sm:col-span-2 w-full p-4 dark:bg-gray-800 bg-slate-100 rounded-lg shadow-md max-w-md mx-auto"},$e={class:"flex gap-2 items-center"},Ee={class:"flex flex-col gap-2 items-center dark:text-green-400 text-green-500 text-xl font-semibold"},Re={class:"flex gap-2"},Ae={class:"flex flex-col gap-2 items-center dark:text-red-400 text-red-500 text-xl font-semibold"},Be={class:"flex gap-2"},Te={class:"flex flex-col items-center gap-2 dark:text-indigo-300 text-indigo-500 text-xl font-semibold"},De={class:"flex gap-2"},ze={__name:"Balance",setup(e){const r=ne();return j(()=>r.fetchBalance()),(t,a)=>{const i=le("router-link");return w(),G("div",Ie,[h("div",Pe,[h("div",$e,[a[1]||(a[1]=h("span",{class:"font-semibold dark:text-gray-200"},"Mes",-1)),_(se,{type:"month",modelValue:c(r).selectedMonth,"onUpdate:modelValue":a[0]||(a[0]=n=>c(r).selectedMonth=n)},null,8,["modelValue"])])]),_(i,{to:{name:"MonthlyReport",query:{type:"ingresos"}},class:"w-full p-4 dark:bg-gray-800 bg-slate-100 rounded-lg shadow-md max-w-md mx-auto"},{default:T(()=>[h("div",Ee,[h("div",Re,[_(c(fe),{class:"w-8 inline-block"}),a[2]||(a[2]=h("span",null,"Ingresos",-1))]),h("span",null,D(c(z)(c(r).balance.totalIngreso)),1)])]),_:1}),_(i,{to:{name:"MonthlyReport",query:{type:"gastos"}},class:"w-full p-4 dark:bg-gray-800 bg-slate-100 rounded-lg shadow-md max-w-md mx-auto"},{default:T(()=>[h("div",Ae,[h("div",Be,[_(c(ve),{class:"w-8 inline-block"}),a[3]||(a[3]=h("span",null,"Gastos",-1))]),h("span",null,D(c(z)(c(r).balance.totalGasto)),1)])]),_:1}),_(i,{to:{name:"MonthlyReport",query:{type:"saldo"}},class:"col-span-full sm:col-span-1 w-full p-4 dark:bg-gray-800 bg-slate-100 rounded-lg shadow-md max-w-md mx-auto"},{default:T(()=>[h("div",Te,[h("div",De,[_(c(he),{class:"w-8 dark:text-indigo-300 text-indigo-500"}),a[4]||(a[4]=h("span",null,"Saldo",-1))]),h("span",{class:de(c(r).balance.balance>=0?"text-indigo-500 dark:text-indigo-300":"text-red-500 dark:text-red-300")},D(c(z)(c(r).balance.balance)),3)])]),_:1})])}}};/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var U=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1}(),M={toTextLines:function(e){var r=[],t;for(e=[].concat(e);e.length;)t=e.pop(),typeof t=="string"?r.unshift.apply(r,t.split(`
`)):Array.isArray(t)?e.push.apply(e,t):k(e)||r.unshift(""+t);return r},textSize:function(e,r,t){var a=[].concat(r),i=a.length,n=e.font,o=0,s;for(e.font=t.string,s=0;s<i;++s)o=Math.max(e.measureText(a[s]).width,o);return e.font=n,{height:i*t.lineHeight,width:o}},bound:function(e,r,t){return Math.max(e,Math.min(r,t))},arrayDiff:function(e,r){var t=e.slice(),a=[],i,n,o,s;for(i=0,o=r.length;i<o;++i)s=r[i],n=t.indexOf(s),n===-1?a.push([s,1]):t.splice(n,1);for(i=0,o=t.length;i<o;++i)a.push([t[i],-1]);return a},rasterize:function(e){return Math.round(e*U)/U}};function W(e,r){var t=r.x,a=r.y;if(t===null)return{x:0,y:-1};if(a===null)return{x:1,y:0};var i=e.x-t,n=e.y-a,o=Math.sqrt(i*i+n*n);return{x:o?i/o:0,y:o?n/o:-1}}function We(e,r,t,a,i){switch(i){case"center":t=a=0;break;case"bottom":t=0,a=1;break;case"right":t=1,a=0;break;case"left":t=-1,a=0;break;case"top":t=0,a=-1;break;case"start":t=-t,a=-a;break;case"end":break;default:i*=Math.PI/180,t=Math.cos(i),a=Math.sin(i);break}return{x:e,y:r,vx:t,vy:a}}var Ne=0,J=1,Y=2,Q=4,Z=8;function P(e,r,t){var a=Ne;return e<t.left?a|=J:e>t.right&&(a|=Y),r<t.top?a|=Z:r>t.bottom&&(a|=Q),a}function je(e,r){for(var t=e.x0,a=e.y0,i=e.x1,n=e.y1,o=P(t,a,r),s=P(i,n,r),l,d,u;!(!(o|s)||o&s);)l=o||s,l&Z?(d=t+(i-t)*(r.top-a)/(n-a),u=r.top):l&Q?(d=t+(i-t)*(r.bottom-a)/(n-a),u=r.bottom):l&Y?(u=a+(n-a)*(r.right-t)/(i-t),d=r.right):l&J&&(u=a+(n-a)*(r.left-t)/(i-t),d=r.left),l===o?(t=d,a=u,o=P(t,a,r)):(i=d,n=u,s=P(i,n,r));return{x0:t,x1:i,y0:a,y1:n}}function $(e,r){var t=r.anchor,a=e,i,n;return r.clamp&&(a=je(a,r.area)),t==="start"?(i=a.x0,n=a.y0):t==="end"?(i=a.x1,n=a.y1):(i=(a.x0+a.x1)/2,n=(a.y0+a.y1)/2),We(i,n,e.vx,e.vy,r.align)}var E={arc:function(e,r){var t=(e.startAngle+e.endAngle)/2,a=Math.cos(t),i=Math.sin(t),n=e.innerRadius,o=e.outerRadius;return $({x0:e.x+a*n,y0:e.y+i*n,x1:e.x+a*o,y1:e.y+i*o,vx:a,vy:i},r)},point:function(e,r){var t=W(e,r.origin),a=t.x*e.options.radius,i=t.y*e.options.radius;return $({x0:e.x-a,y0:e.y-i,x1:e.x+a,y1:e.y+i,vx:t.x,vy:t.y},r)},bar:function(e,r){var t=W(e,r.origin),a=e.x,i=e.y,n=0,o=0;return e.horizontal?(a=Math.min(e.x,e.base),n=Math.abs(e.base-e.x)):(i=Math.min(e.y,e.base),o=Math.abs(e.base-e.y)),$({x0:a,y0:i+o,x1:a+n,y1:i,vx:t.x,vy:t.y},r)},fallback:function(e,r){var t=W(e,r.origin);return $({x0:e.x,y0:e.y,x1:e.x+(e.width||0),y1:e.y+(e.height||0),vx:t.x,vy:t.y},r)}},p=M.rasterize;function Ge(e){var r=e.borderWidth||0,t=e.padding,a=e.size.height,i=e.size.width,n=-i/2,o=-a/2;return{frame:{x:n-t.left-r,y:o-t.top-r,w:i+t.width+r*2,h:a+t.height+r*2},text:{x:n,y:o,w:i,h:a}}}function Oe(e,r){var t=r.chart.getDatasetMeta(r.datasetIndex).vScale;if(!t)return null;if(t.xCenter!==void 0&&t.yCenter!==void 0)return{x:t.xCenter,y:t.yCenter};var a=t.getBasePixel();return e.horizontal?{x:a,y:null}:{x:null,y:a}}function Fe(e){return e instanceof K?E.arc:e instanceof pe?E.point:e instanceof me?E.bar:E.fallback}function He(e,r,t,a,i,n){var o=Math.PI/2;if(n){var s=Math.min(n,i/2,a/2),l=r+s,d=t+s,u=r+a-s,f=t+i-s;e.moveTo(r,d),l<u&&d<f?(e.arc(l,d,s,-Math.PI,-o),e.arc(u,d,s,-o,0),e.arc(u,f,s,0,o),e.arc(l,f,s,o,Math.PI)):l<u?(e.moveTo(l,t),e.arc(u,d,s,-o,o),e.arc(l,d,s,o,Math.PI+o)):d<f?(e.arc(l,d,s,-Math.PI,0),e.arc(l,f,s,0,Math.PI)):e.arc(l,d,s,-Math.PI,Math.PI),e.closePath(),e.moveTo(r,t)}else e.rect(r,t,a,i)}function Le(e,r,t){var a=t.backgroundColor,i=t.borderColor,n=t.borderWidth;!a&&(!i||!n)||(e.beginPath(),He(e,p(r.x)+n/2,p(r.y)+n/2,p(r.w)-n,p(r.h)-n,t.borderRadius),e.closePath(),a&&(e.fillStyle=a,e.fill()),i&&n&&(e.strokeStyle=i,e.lineWidth=n,e.lineJoin="miter",e.stroke()))}function Ve(e,r,t){var a=t.lineHeight,i=e.w,n=e.x,o=e.y+a/2;return r==="center"?n+=i/2:(r==="end"||r==="right")&&(n+=i),{h:a,w:i,x:n,y:o}}function Ue(e,r,t){var a=e.shadowBlur,i=t.stroked,n=p(t.x),o=p(t.y),s=p(t.w);i&&e.strokeText(r,n,o,s),t.filled&&(a&&i&&(e.shadowBlur=0),e.fillText(r,n,o,s),a&&i&&(e.shadowBlur=a))}function qe(e,r,t,a){var i=a.textAlign,n=a.color,o=!!n,s=a.font,l=r.length,d=a.textStrokeColor,u=a.textStrokeWidth,f=d&&u,y;if(!(!l||!o&&!f))for(t=Ve(t,i,s),e.font=s.string,e.textAlign=i,e.textBaseline="middle",e.shadowBlur=a.textShadowBlur,e.shadowColor=a.textShadowColor,o&&(e.fillStyle=n),f&&(e.lineJoin="round",e.lineWidth=u,e.strokeStyle=d),y=0,l=r.length;y<l;++y)Ue(e,r[y],{stroked:f,filled:o,w:t.w,x:t.x,y:t.y+t.h*y})}var ee=function(e,r,t,a){var i=this;i._config=e,i._index=a,i._model=null,i._rects=null,i._ctx=r,i._el=t};S(ee.prototype,{_modelize:function(e,r,t,a){var i=this,n=i._index,o=xe(v([t.font,{}],a,n)),s=v([t.color,ye.color],a,n);return{align:v([t.align,"center"],a,n),anchor:v([t.anchor,"center"],a,n),area:a.chart.chartArea,backgroundColor:v([t.backgroundColor,null],a,n),borderColor:v([t.borderColor,null],a,n),borderRadius:v([t.borderRadius,0],a,n),borderWidth:v([t.borderWidth,0],a,n),clamp:v([t.clamp,!1],a,n),clip:v([t.clip,!1],a,n),color:s,display:e,font:o,lines:r,offset:v([t.offset,4],a,n),opacity:v([t.opacity,1],a,n),origin:Oe(i._el,a),padding:_e(v([t.padding,4],a,n)),positioner:Fe(i._el),rotation:v([t.rotation,0],a,n)*(Math.PI/180),size:M.textSize(i._ctx,r,o),textAlign:v([t.textAlign,"start"],a,n),textShadowBlur:v([t.textShadowBlur,0],a,n),textShadowColor:v([t.textShadowColor,s],a,n),textStrokeColor:v([t.textStrokeColor,s],a,n),textStrokeWidth:v([t.textStrokeWidth,0],a,n)}},update:function(e){var r=this,t=null,a=null,i=r._index,n=r._config,o,s,l,d=v([n.display,!0],e,i);d&&(o=e.dataset.data[i],s=ce(X(n.formatter,[o,e]),o),l=k(s)?[]:M.toTextLines(s),l.length&&(t=r._modelize(d,l,n,e),a=Ge(t))),r._model=t,r._rects=a},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,r){var t=this,a=e.ctx,i=t._model,n=t._rects,o;this.visible()&&(a.save(),i.clip&&(o=i.area,a.beginPath(),a.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),a.clip()),a.globalAlpha=M.bound(0,i.opacity,1),a.translate(p(r.x),p(r.y)),a.rotate(i.rotation),Le(a,n.frame,i),qe(a,i.lines,n.text,i),a.restore())}});var Xe=Number.MIN_SAFE_INTEGER||-9007199254740991,Ke=Number.MAX_SAFE_INTEGER||9007199254740991;function g(e,r,t){var a=Math.cos(t),i=Math.sin(t),n=r.x,o=r.y;return{x:n+a*(e.x-n)-i*(e.y-o),y:o+i*(e.x-n)+a*(e.y-o)}}function q(e,r){var t=Ke,a=Xe,i=r.origin,n,o,s,l,d;for(n=0;n<e.length;++n)o=e[n],s=o.x-i.x,l=o.y-i.y,d=r.vx*s+r.vy*l,t=Math.min(t,d),a=Math.max(a,d);return{min:t,max:a}}function R(e,r){var t=r.x-e.x,a=r.y-e.y,i=Math.sqrt(t*t+a*a);return{vx:(r.x-e.x)/i,vy:(r.y-e.y)/i,origin:e,ln:i}}var te=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};S(te.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,r,t){this._rotation=t,this._rect={x:r.x+e.x,y:r.y+e.y,w:r.w,h:r.h}},contains:function(e){var r=this,t=1,a=r._rect;return e=g(e,r.center(),-r._rotation),!(e.x<a.x-t||e.y<a.y-t||e.x>a.x+a.w+t*2||e.y>a.y+a.h+t*2)},intersects:function(e){var r=this._points(),t=e._points(),a=[R(r[0],r[1]),R(r[0],r[3])],i,n,o;for(this._rotation!==e._rotation&&a.push(R(t[0],t[1]),R(t[0],t[3])),i=0;i<a.length;++i)if(n=q(r,a[i]),o=q(t,a[i]),n.max<o.min||o.max<n.min)return!1;return!0},_points:function(){var e=this,r=e._rect,t=e._rotation,a=e.center();return[g({x:r.x,y:r.y},a,t),g({x:r.x+r.w,y:r.y},a,t),g({x:r.x+r.w,y:r.y+r.h},a,t),g({x:r.x,y:r.y+r.h},a,t)]}});function ae(e,r,t){var a=r.positioner(e,r),i=a.vx,n=a.vy;if(!i&&!n)return{x:a.x,y:a.y};var o=t.w,s=t.h,l=r.rotation,d=Math.abs(o/2*Math.cos(l))+Math.abs(s/2*Math.sin(l)),u=Math.abs(o/2*Math.sin(l))+Math.abs(s/2*Math.cos(l)),f=1/Math.max(Math.abs(i),Math.abs(n));return d*=i*f,u*=n*f,d+=r.offset*i,u+=r.offset*n,{x:a.x+d,y:a.y+u}}function Je(e,r){var t,a,i,n;for(t=e.length-1;t>=0;--t)for(i=e[t].$layout,a=t-1;a>=0&&i._visible;--a)n=e[a].$layout,n._visible&&i._box.intersects(n._box)&&r(i,n);return e}function Ye(e){var r,t,a,i,n,o,s;for(r=0,t=e.length;r<t;++r)a=e[r],i=a.$layout,i._visible&&(s=new Proxy(a._el,{get:(l,d)=>l.getProps([d],!0)[d]}),n=a.geometry(),o=ae(s,a.model(),n),i._box.update(o,n,a.rotation()));return Je(e,function(l,d){var u=l._hidable,f=d._hidable;u&&f||f?d._visible=!1:u&&(l._visible=!1)})}var C={prepare:function(e){var r=[],t,a,i,n,o;for(t=0,i=e.length;t<i;++t)for(a=0,n=e[t].length;a<n;++a)o=e[t][a],r.push(o),o.$layout={_box:new te,_hidable:!1,_visible:!0,_set:t,_idx:o._index};return r.sort(function(s,l){var d=s.$layout,u=l.$layout;return d._idx===u._idx?u._set-d._set:u._idx-d._idx}),this.update(r),r},update:function(e){var r=!1,t,a,i,n,o;for(t=0,a=e.length;t<a;++t)i=e[t],n=i.model(),o=i.$layout,o._hidable=n&&n.display==="auto",o._visible=i.visible(),r|=o._hidable;r&&Ye(e)},lookup:function(e,r){var t,a;for(t=e.length-1;t>=0;--t)if(a=e[t].$layout,a&&a._visible&&a._box.contains(r))return e[t];return null},draw:function(e,r){var t,a,i,n,o,s;for(t=0,a=r.length;t<a;++t)i=r[t],n=i.$layout,n._visible&&(o=i.geometry(),s=ae(i._el,i.model(),o),n._box.update(s,o,i.rotation()),i.draw(e,s))}},Qe=function(e){if(k(e))return null;var r=e,t,a,i;if(be(e))if(!k(e.label))r=e.label;else if(!k(e.r))r=e.r;else for(r="",t=Object.keys(e),i=0,a=t.length;i<a;++i)r+=(i!==0?", ":"")+t[i]+": "+e[t[i]];return""+r},Ze={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:Qe,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},x="$datalabels",re="$default";function et(e,r){var t=e.datalabels,a={},i=[],n,o;return t===!1?null:(t===!0&&(t={}),r=S({},[r,t]),n=r.labels||{},o=Object.keys(n),delete r.labels,o.length?o.forEach(function(s){n[s]&&i.push(S({},[r,n[s],{_key:s}]))}):i.push(r),a=i.reduce(function(s,l){return ge(l.listeners||{},function(d,u){s[u]=s[u]||{},s[u][l._key||re]=d}),delete l.listeners,s},{}),{labels:i,listeners:a})}function N(e,r,t,a){if(r){var i=t.$context,n=t.$groups,o;r[n._set]&&(o=r[n._set][n._key],o&&X(o,[i,a])===!0&&(e[x]._dirty=!0,t.update(i)))}}function tt(e,r,t,a,i){var n,o;!t&&!a||(t?a?t!==a&&(o=n=!0):o=!0:n=!0,o&&N(e,r.leave,t,i),n&&N(e,r.enter,a,i))}function at(e,r){var t=e[x],a=t._listeners,i,n;if(!(!a.enter&&!a.leave)){if(r.type==="mousemove")n=C.lookup(t._labels,r);else if(r.type!=="mouseout")return;i=t._hovered,t._hovered=n,tt(e,a,i,n,r)}}function rt(e,r){var t=e[x],a=t._listeners.click,i=a&&C.lookup(t._labels,r);i&&N(e,a,i,r)}var it={id:"datalabels",defaults:Ze,beforeInit:function(e){e[x]={_actives:[]}},beforeUpdate:function(e){var r=e[x];r._listened=!1,r._listeners={},r._datasets=[],r._labels=[]},afterDatasetUpdate:function(e,r,t){var a=r.index,i=e[x],n=i._datasets[a]=[],o=e.isDatasetVisible(a),s=e.data.datasets[a],l=et(s,t),d=r.meta.data||[],u=e.ctx,f,y,O,F,A,H,b,m;for(u.save(),f=0,O=d.length;f<O;++f)if(b=d[f],b[x]=[],o&&b&&e.getDataVisibility(f)&&!b.skip)for(y=0,F=l.labels.length;y<F;++y)A=l.labels[y],H=A._key,m=new ee(A,u,b,f),m.$groups={_set:a,_key:H||re},m.$context={active:!1,chart:e,dataIndex:f,dataset:s,datasetIndex:a},m.update(m.$context),b[x].push(m),n.push(m);u.restore(),S(i._listeners,l.listeners,{merger:function(I,B,ie){B[I]=B[I]||{},B[I][r.index]=ie[I],i._listened=!0}})},afterUpdate:function(e){e[x]._labels=C.prepare(e[x]._datasets)},afterDatasetsDraw:function(e){C.draw(e,e[x]._labels)},beforeEvent:function(e,r){if(e[x]._listened){var t=r.event;switch(t.type){case"mousemove":case"mouseout":at(e,t);break;case"click":rt(e,t);break}}},afterEvent:function(e){var r=e[x],t=r._actives,a=r._actives=e.getActiveElements(),i=M.arrayDiff(t,a),n,o,s,l,d,u,f;for(n=0,o=i.length;n<o;++n)if(d=i[n],d[1])for(f=d[0].element[x]||[],s=0,l=f.length;s<l;++s)u=f[s],u.$context.active=d[1]===1,u.update(u.$context);(r._dirty||i.length)&&(C.update(r._labels),e.render()),delete r._dirty}};const nt={class:"flex flex-col sm:flex-row gap-4 sm:max-w-4xl m-auto"},ot={class:"w-full max-w-md mx-auto dark:bg-gray-800 bg-slate-100 rounded shadow-2xl p-4"},st={class:"w-full max-w-md mx-auto dark:bg-gray-800 bg-slate-100 rounded shadow-2xl p-4"},lt={__name:"HomeGraphics",setup(e){we.register(ke,Me,Ce,K,it);const r={responsive:!0,plugins:{legend:{position:"right"},datalabels:{formatter:(a,i)=>{const n=i.chart.data.datasets[0].data.reduce((s,l)=>s+l,0);return`${(a/n*100).toFixed(1)}%`},color:"#fff",font:{size:12,weight:"bold"}}}},t=oe();return j(()=>t.getTotalByCategory()),(a,i)=>(w(),G("div",nt,[h("div",ot,[i[0]||(i[0]=h("h4",{class:"text-xl font-semibold dark:text-gray-300"},"Gasto Por Categoria",-1)),(w(),L(c(V),{key:c(t).chartKeyA,data:c(t).chartDataGasto,options:r},null,8,["data"]))]),h("div",st,[i[1]||(i[1]=h("h4",{class:"text-xl font-semibold dark:text-gray-300"},"Ingreso Por Categoria",-1)),(w(),L(c(V),{key:c(t).chartKeyB,data:c(t).chartDataIngreso,options:r},null,8,["data"]))])]))}},dt={class:"dark:bg-gray-900 p-3 flex flex-col gap-4"},yt=ue({__name:"Home",setup(e){const r=Se();return j(async()=>await r.getCategories()),(t,a)=>(w(),G("div",dt,[_(ze),_(lt)]))}});export{yt as default};
