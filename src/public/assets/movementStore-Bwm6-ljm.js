import{c as d,o as u,a as l,h as v,M as C,x as S,i as V,b as f,n as h,u as m,t as w,w as B,J as D,N as M,F as E,r as I,T as N,O as L,j as y}from"./index-D20-CgTh.js";import{I as b}from"./iconify-D6A_XGjB.js";import{u as T}from"./categoriesStore-BoGzBli8.js";import{g as x}from"./icons-BjrsL8W4.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as F,a as O}from"./graphStore-ffSWiZGa.js";function $(t,g){return u(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"fill-rule":"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z","clip-rule":"evenodd"})])}const z={class:"w-full"},G={key:0,class:"flex items-center gap-2"},J={key:1},R={class:"max-h-60 p-2 overflow-y-auto mt-1 rounded-md bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 max-h-60"},Z={class:"grid grid-cols-4 gap-3"},q=["onClick"],A={class:"mt-1 text-xs block w-full text-center break-words text-wrap"},H={__name:"CategorySelect",props:{modelValue:Number,type:String},emits:["update:modelValue"],setup(t,{emit:g}){const e=t,a=g,i=T(),c=v([]),o=v(!1),_=()=>o.value=!o.value,r=v(null),k=s=>{a("update:modelValue",s.id),r.value=s,o.value=!1};return C(()=>{e.modelValue===0&&(r.value="")}),S(()=>e.type,()=>{c.value=i.categories.filter(s=>s.type===e.type),r.value=""}),V(async()=>{await i.getCategories();const s=i.categories.find(p=>p.id===e.modelValue);s&&(r.value=s),e.type?c.value=i.categories.filter(p=>p.type===e.type):c.value=i.categories}),(s,p)=>(u(),d("div",z,[l("button",{onClick:_,type:"button",class:"w-full flex items-center justify-between p-2 border border-gray-300 rounded-md shadow-sm dark:bg-gray-800 dark:border-gray-700 text-left"},[r.value?(u(),d("div",G,[l("div",{class:h([[m(x)(r.value.icon)],"rounded-full p-1 text-white text-lg"])},[f(m(b),{icon:r.value.icon,class:"w-5 h-5"},null,8,["icon"])],2),l("span",null,w(r.value.name),1)])):(u(),d("span",J,"Selecciona Categoria")),f(m($),{class:"w-5 h-5 text-gray-400"})]),f(N,{name:"slide-down"},{default:B(()=>[D(l("div",R,[l("div",Z,[(u(!0),d(E,null,I(c.value,n=>(u(),d("div",{key:n.id,onClick:K=>k(n),class:h(["flex p-1 flex-col items-center rounded-lg cursor-pointer transition-all",{"bg-primary-100 dark:bg-primary-900 border-2 border-gray-200 dark:border-gray-500":t.modelValue===n.id,"hover:bg-gray-200 dark:hover:bg-gray-700":t.modelValue!==n.id}])},[l("div",{class:h([[m(x)(n.icon)],"rounded-full p-2 text-white text-lg hover:scale-110 duration-200"])},[f(m(b),{icon:n.icon},null,8,["icon"])],2),l("span",A,w(n.name),1)],10,q))),128))])],512),[[M,o.value]])]),_:1})]))}},ee=j(H,[["__scopeId","data-v-9cb99b1a"]]),te=L("movement",()=>{const t=F(),g=O(),e=v(!1),a=v({type:"ingreso",amount:"",description:"",CategoryId:0,date:null});return{saveMovement:async c=>{try{if(!c)await y.post("/movements",a.value);else{const o=new Date(a.value.date);a.value.date=o.toLocaleString("sv-SE"),await y.put(`/movements/${a.value.id}`,a.value)}t.fetchBalance(),g.getTotalByCategory(t.startDate,t.endDate),e.value=!0}catch(o){e.value=!1,console.error("Error al registrar movimiento",o)}},isSaved:e,movement:a}});export{ee as C,te as u};
