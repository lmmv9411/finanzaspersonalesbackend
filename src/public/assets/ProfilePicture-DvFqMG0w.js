import{r as o,B as u,f as b,g as c,c as _,o as d,a,t as h,m as v}from"./index-Bk6c8noU.js";const x={class:"max-w-sm mx-auto mt-10 p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-lg"},y={class:"flex flex-col items-center gap-4"},w=["src"],k=["disabled"],B={__name:"ProfilePictureUploader",setup(f){const l=o(`${u}/uploads/default.jpg`),s=o(null),r=o(null),i=o(null),n=o(!1);function p(){s.value.click()}function g(t){const e=t.target.files[0];e&&(r.value=e,i.value=URL.createObjectURL(e))}async function m(){if(!r.value)return;n.value=!0;const t=new FormData;t.append("image",r.value);try{const{data:e}=await c.post("/user/upload-profile-pic",t,{headers:{"Content-Type":"multipart/form-data"}});e.url?(l.value=`${u}${e.url}`,i.value=null,r.value=null):Swal.fire({title:"Error al subir foto",icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}catch(e){console.error(e),Swal.fire({title:"Error al subir foto",text:e.response.data.error,icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}finally{n.value=!1}}return b(async()=>{const{data:t}=await c.get("/user");l.value=`${u}${t.profilePicture}`}),(t,e)=>(d(),_("div",x,[e[0]||(e[0]=a("h2",{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-100 text-center"},"Subir Foto de Perfil",-1)),a("div",y,[a("img",{src:i.value||l.value,alt:"Foto de perfil",class:"w-32 h-32 rounded-full object-cover border-4 border-gray-300 dark:border-gray-600 shadow"},null,8,w),a("input",{ref_key:"fileInput",ref:s,type:"file",accept:"image/*",class:"hidden",onChange:g},null,544),a("button",{onClick:p,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"}," Seleccionar imagen "),a("button",{onClick:m,disabled:!r.value||n.value,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition"},h(n.value?"Subiendo...":"Guardar"),9,k)])]))}},S={__name:"ProfilePicture",setup(f){return(l,s)=>(d(),v(B))}};export{S as default};
