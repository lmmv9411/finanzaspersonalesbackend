import{c as g,o as d,a as r,r as v,b as M,d as _,h as N,i as E,f as c,G as P,k as t,I as U,w as k,J as Z,L,F as H,g as O,C as S,t as B,n as V}from"./index-CF7U3Sn9.js";import{g as I,I as $}from"./icons-BC2YiZA8.js";import{_ as j}from"./IconPickerSolid-DB1dRREO.js";import{_ as b}from"./BaseButton-Cq4GcSSo.js";import{S as a,_ as T}from"./BaseInput-DU5rvRvT.js";import{u as A}from"./categoriesStore-DXLtUOul.js";function z(s,l){return d(),g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{d:"M13.488 2.513a1.75 1.75 0 0 0-2.475 0L6.75 6.774a2.75 2.75 0 0 0-.596.892l-.848 2.047a.75.75 0 0 0 .98.98l2.047-.848a2.75 2.75 0 0 0 .892-.596l4.261-4.262a1.75 1.75 0 0 0 0-2.474Z"}),r("path",{d:"M4.75 3.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V9A.75.75 0 0 1 14 9v2.25A2.75 2.75 0 0 1 11.25 14h-6.5A2.75 2.75 0 0 1 2 11.25v-6.5A2.75 2.75 0 0 1 4.75 2H7a.75.75 0 0 1 0 1.5H4.75Z"})])}function D(s,l){return d(),g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"fill-rule":"evenodd",d:"M5 3.25V4H2.75a.75.75 0 0 0 0 1.5h.3l.815 8.15A1.5 1.5 0 0 0 5.357 15h5.285a1.5 1.5 0 0 0 1.493-1.35l.815-8.15h.3a.75.75 0 0 0 0-1.5H11v-.75A2.25 2.25 0 0 0 8.75 1h-1.5A2.25 2.25 0 0 0 5 3.25Zm2.25-.75a.75.75 0 0 0-.75.75V4h3v-.75a.75.75 0 0 0-.75-.75h-1.5ZM6.05 6a.75.75 0 0 1 .787.713l.275 5.5a.75.75 0 0 1-1.498.075l-.275-5.5A.75.75 0 0 1 6.05 6Zm3.9 0a.75.75 0 0 1 .712.787l-.275 5.5a.75.75 0 0 1-1.498-.075l.275-5.5a.75.75 0 0 1 .786-.711Z","clip-rule":"evenodd"})])}function F(){const s=v(""),l=v(!1),u=v(null),i=A(),n=v({}),w=e=>n.value=e,p=v(!1),m=async()=>{if(l.value){x();return}try{if(s.value===""){a.fire({title:"Nombre Vacío",icon:"error",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"});return}if(!n.value.icon){a.fire({title:"Ícono Vacío",icon:"error",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"});return}a.fire({title:"Creando...",allowOutsideClick:!1,didOpen:()=>{a.showLoading()},theme:"auto"}),await _.post("/categories",{name:s.value,icon:n.value.icon}),a.fire({title:"Categoria Creada",icon:"success",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"}),h()}catch(e){console.error("Error creating category:",e),a.fire({title:"Error al crear categoria",text:e.response.data.error,icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}},C=async e=>{try{if(!(await a.fire({title:"Eliminar Categoria?",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",theme:"auto"})).isConfirmed){a.fire({title:"No se eliminó!",icon:"info",timer:2e3,theme:"auto",toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0});return}a.fire({title:"Eliminando...",allowOutsideClick:!1,didOpen:()=>{a.showLoading()},theme:"auto"}),await _.delete(`/categories/${e}`),i.getCategories(),a.fire({title:"Categoria Eliminada",icon:"success",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"})}catch(o){console.error("Error deleting category:",o),a.fire({title:"Error al eliminar categoria",text:o.response.data.error,icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}},h=()=>{i.getCategories(),l.value=!1,u.value=null,s.value="",n.value.icon=null,p.value=!1},f=e=>{const o=i.categories.findIndex(y=>y.id===e.id);o!==-1&&(s.value=i.categories[o].name,i.categories.splice(o,1),l.value=!0,u.value=e,n.value.icon=e.icon)},x=async()=>{try{await _.put(`/categories/${u.value.id}`,{name:s.value,icon:n.value.icon})}catch(e){console.error("Error updating category:",e)}h()};return M(async()=>i.getCategories()),{name:s,createCategory:m,deleteCategory:C,updateCategory:x,onUpdateCategory:f,isUpdate:l,selectedIcon:n,handleIconSelected:w,reset:h,showIconPicker:p}}const R={class:"pt-4 flex flex-col gap-8 px-4"},q={class:"flex gap-2"},G={class:"dark:text-gray-100"},J={class:"container max-w-xs mx-auto flex gap-4 flex-col"},K={class:"text-xl border gap-4 border-gray-200 dark:border-gray-600 rounded-lg flex justify-between p-4 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors duration-300 shadow-sm"},Q={class:"flex gap-2"},W=["onClick"],X=["onClick"],se={__name:"Categories",setup(s){const l=A(),{name:u,createCategory:i,deleteCategory:n,onUpdateCategory:w,isUpdate:p,selectedIcon:m,handleIconSelected:C,reset:h,showIconPicker:f}=F();return(x,e)=>(d(),g("div",R,[r("form",{onSubmit:e[2]||(e[2]=L((...o)=>t(i)&&t(i)(...o),["prevent"])),class:"shadow-md p-2 rounded dark:bg-gray-800 bg-slate-100 flex flex-wrap gap-2 dark:text-gray-300 items-start m-auto"},[c(T,{modelValue:t(u),"onUpdate:modelValue":e[0]||(e[0]=o=>P(u)?u.value=o:null),modelModifiers:{trim:!0},placeholder:"Nombre de categoria"},null,8,["modelValue"]),r("div",q,[c(b,{type:"submit"},{default:k(()=>[S(B(t(p)?"Actualizar":"Crear"),1)]),_:1}),U(c(b,{color:"danger",onClick:t(h)},{default:k(()=>e[4]||(e[4]=[S("Cancelar")])),_:1},8,["onClick"]),[[Z,t(p)]]),c(b,{color:"secondary",onClick:e[1]||(e[1]=o=>f.value=!t(f)),class:"flex items-center gap-2 p-2 border rounded dark:border-gray-500"},{default:k(()=>[t(m).icon?(d(),g("div",{key:0,class:V(["rounded-full p-2 w-8 h-8 flex items-center justify-center transition-all duration-300 hover:scale-110 cursor-pointer shadow-xl",[t(I)(t(m).icon??"")]])},[c(t($),{icon:t(m).icon,class:"w-6 h-6 text-white"},null,8,["icon"])],2)):E("",!0),r("span",G,B(t(m).name||"Icono"),1)]),_:1})])],32),t(f)?(d(),N(j,{key:0,onSelected:t(C),onClose:e[3]||(e[3]=o=>f.value=!1)},null,8,["onSelected"])):E("",!0),r("div",J,[(d(!0),g(H,null,O(t(l).categories,o=>(d(),g("div",{key:o.id},[r("div",K,[r("div",{class:V([[t(I)(o.icon)],"rounded-full p-2 w-10 h-10 flex items-center justify-center transition-all duration-300 group-hover:scale-110 cursor-pointer shadow-xl"])},[c(t($),{icon:o.icon,class:"text-white"},null,8,["icon"])],2),r("span",null,B(o.name),1),r("div",Q,[r("button",{onClick:y=>t(n)(o.id),class:"text-red-500 hover:text-red-700 cursor-pointer",title:"Eliminar categoria"},[c(t(D),{class:"h-5 w-5"})],8,W),r("button",{onClick:y=>t(w)(o),class:"text-blue-500 hover:text-blue-700 cursor-pointer",title:"Editar categoria"},[c(t(z),{class:"h-5 w-5"})],8,X)])])]))),128))])]))}};export{se as default};
