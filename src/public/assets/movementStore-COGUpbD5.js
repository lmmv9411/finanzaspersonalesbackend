import{c as i,o as c,a as s,l as d,K as C,m as S,h as V,b as p,n as f,u as m,t as w,w as D,G as B,L as I,F as M,r as E,T as L,k as N,i as y}from"./index-Bynz4OC3.js";import{I as _}from"./iconify-KYVFi5b4.js";import{u as F}from"./categoriesStore-Dyd8t4Ft.js";import{g as b}from"./icons-DFPeI9cY.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";function T(t,u){return c(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"fill-rule":"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z","clip-rule":"evenodd"})])}const $={class:"w-full"},j={key:0,class:"flex items-center gap-2"},z={key:1},G={class:"max-h-60 p-2 overflow-y-auto mt-1 rounded-md bg-gray-100 dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 max-h-60"},K={class:"grid grid-cols-4 gap-3"},P=["onClick"],R={class:"mt-1 text-xs block w-full text-center break-words text-wrap"},Z={__name:"CategorySelect",props:{modelValue:Number,type:String},emits:["update:modelValue"],setup(t,{emit:u}){const e=t,h=u,l=F(),a=d([]),v=d(!1),x=()=>v.value=!v.value,o=d(null),k=r=>{h("update:modelValue",r.id),o.value=r,v.value=!1};return C(()=>{e.modelValue===0&&(o.value="")}),S(()=>e.type,()=>{a.value=l.categories.filter(r=>r.type===e.type),o.value=""}),V(async()=>{await l.getCategories();const r=l.categories.find(g=>g.id===e.modelValue);r&&(o.value=r),e.type?a.value=l.categories.filter(g=>g.type===e.type):a.value=l.categories}),(r,g)=>(c(),i("div",$,[s("button",{onClick:x,type:"button",class:"w-full flex items-center justify-between p-2 border border-gray-300 rounded-md shadow-sm dark:bg-gray-800 dark:border-gray-700 text-left"},[o.value?(c(),i("div",j,[s("div",{class:f([[m(b)(o.value.icon)],"rounded-full p-1 text-white text-lg"])},[p(m(_),{icon:o.value.icon,class:"w-5 h-5"},null,8,["icon"])],2),s("span",null,w(o.value.name),1)])):(c(),i("span",z,"Selecciona Categoria")),p(m(T),{class:"w-5 h-5 text-gray-400"})]),p(L,{name:"slide-down"},{default:D(()=>[B(s("div",G,[s("div",K,[(c(!0),i(M,null,E(a.value,n=>(c(),i("div",{key:n.id,onClick:q=>k(n),class:f(["flex p-1 flex-col items-center rounded-lg cursor-pointer transition-all",{"bg-primary-100 dark:bg-primary-900 border-2 border-gray-200 dark:border-gray-500":t.modelValue===n.id,"hover:bg-gray-200 dark:hover:bg-gray-700":t.modelValue!==n.id}])},[s("div",{class:f([[m(b)(n.icon)],"rounded-full p-2 text-white text-lg hover:scale-110 duration-200"])},[p(m(_),{icon:n.icon},null,8,["icon"])],2),s("span",R,w(n.name),1)],10,P))),128))])],512),[[I,v.value]])]),_:1})]))}},W=O(Z,[["__scopeId","data-v-1930e17f"]]),X=N("movement",()=>{const t=d(!1),u=d(!1),e=d({type:"ingreso",amount:"",description:"",CategoryId:0,date:null});return{saveMovement:async l=>{try{if(e.value.date&&u.value){const a=new Date(e.value.date);e.value.date=a.toISOString()}l?await y.put(`/movements/${e.value.id}`,e.value):await y.post("/movements",e.value),t.value=!0}catch(a){t.value=!1,console.error("Error al registrar movimiento",a)}},isSaved:t,movement:e,showPicker:u}});export{W as C,X as u};
