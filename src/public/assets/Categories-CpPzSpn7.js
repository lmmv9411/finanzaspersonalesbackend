import{r as g,d as v,x as i,c as y,a as t,D as C,e as w,v as _,u as d,y as k,t as b,F as m,z as E,o as f}from"./index-BmVc9umw.js";function U(){const s=g(""),n=g([]),a=g(!1);let c=null;const l=async()=>{try{const e=await i.get("/categories");n.value=e.data}catch(e){console.error("Error fetching categories:",e)}},u=async()=>{if(a.value){o(c);return}try{const e=await i.post("/categories",{name:s.value});console.log("Category created:",e.data),s.value="",l()}catch(e){console.error("Error creating category:",e)}},p=async e=>{try{const r=await i.delete(`/categories/${e}`);console.log("Category deleted:",r.data),l()}catch(r){console.error("Error deleting category:",r)}},x=e=>{const r=n.value.findIndex(h=>h.id===e);r!==-1&&(s.value=n.value[r].name,n.value.splice(r,1),a.value=!0,c=e)},o=async e=>{try{const r=await i.put(`/categories/${e}`,{name:s.value});console.log("Category updated:",r.data),l(),a.value=!1,c=null,s.value=""}catch(r){console.error("Error updating category:",r)}};return v(async()=>l()),{name:s,categories:n,createCategory:u,deleteCategory:p,updateCategory:o,onUpdateCategory:x,isUpdate:a,getCategories:l}}const $={class:"flex flex-col gap-8"},B={class:"bg-blue-500 text-white rounded p-2 cursor-pointer"},D={class:"dark:text-white w-fit table-auto border-collapse whitespace-nowrap m-auto overflow-auto"},M={class:"px-4 py-2"},N={class:"px-4 py-2"},z={class:"px-4 py-2 flex gap-2"},A=["onClick"],F=["onClick"],V={__name:"Categories",setup(s){const{categories:n,name:a,createCategory:c,deleteCategory:l,onUpdateCategory:u,isUpdate:p}=U();return(x,o)=>(f(),y(m,null,[o[3]||(o[3]=t("h1",{class:"dark:text-white font-bold text-xl"},"Categorias",-1)),t("div",$,[t("form",{onSubmit:o[1]||(o[1]=C((...e)=>d(c)&&d(c)(...e),["prevent"])),class:"shadow-md p-2 rounded dark:bg-gray-800 bg-slate-100 flex gap-2 dark:text-gray-300 items-start w-fit m-auto flex-wrap"},[w(t("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>k(a)?a.value=e:null),type:"text",placeholder:"Nombre de categoria",class:"p-2 border border-gray-300 dark:bg-gray-900 dark:border-gray-700 border-2 focus:border-gray-300 focus:outline-none focus:border-gray-500 transition-colors duration-300 rounded"},null,512),[[_,d(a)]]),t("button",B,b(d(p)?"Actualizar":"Crear"),1)],32),t("table",D,[o[2]||(o[2]=t("thead",null,[t("tr",{class:"border-b border-gray-400"},[t("th",null,"Id"),t("th",null,"Nombre"),t("th",null,"Acciones")])],-1)),t("tbody",null,[(f(!0),y(m,null,E(d(n),e=>(f(),y("tr",{class:"border-b text-center",key:e.id},[t("td",M,b(e.id),1),t("td",N,b(e.name),1),t("td",z,[t("button",{onClick:r=>d(l)(e.id),class:"bg-red-500 text-white rounded p-2 cursor-pointer"},"Eliminar",8,A),t("button",{onClick:r=>d(u)(e.id),class:"bg-blue-500 text-white rounded p-2 cursor-pointer"},"Editar",8,F)])]))),128))])])])],64))}};export{V as default};
