import{c as m,a as e,o as s,l,z as u,b as h,d,u as c,x as N,n as k,j as L,A as j,i as z,S as b}from"./index-Bynz4OC3.js";import{_ as C}from"./BaseInput-Bs69CCxs.js";function P(_,r){return s(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function V(_,r){return s(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}const q={class:"max-w-md mx-auto p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md mt-6"},U={class:"relative"},E={class:"relative"},O={class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},Z={class:"list-disc list-inside"},F={class:"relative"},H={key:0,class:"mt-1 text-sm text-red-500"},I={class:"pt-2"},T=["disabled"],D={key:0},G={key:1},Q={__name:"Password",setup(_){const r=l(""),a=l(""),n=l(""),v=l(!1),w=l(!1),x=l(!1),f=l(!1),p=u(()=>a.value.length>=8),g=u(()=>/\d/.test(a.value)),y=u(()=>/[!@#$%^&*(),.?":{}|<>]/.test(a.value)),B=u(()=>a.value===n.value),S=u(()=>p.value&&g.value&&y.value),M=u(()=>r.value&&a.value&&n.value&&S.value&&B.value),$=()=>{},A=async()=>{if(M.value){v.value=!0;try{const i=await z.post("/user/password",{oldPassword:r.value,newPassword:a.value});if(i.status!==201){debugger;b.fire({title:"Ocurrió un error",text:i.data.error,icon:"error",showConfirmButton:!1,timer:3e3,theme:"auto"});return}b.fire({title:"Contraseña Cambiada",icon:"success",showConfirmButton:!1,timer:3e3,theme:"auto"}),r.value="",a.value="",n.value=""}catch(i){b.fire({title:"Ocurrió un error",text:i.response.data.error,icon:"error",showConfirmButton:!1,timer:4e3,theme:"auto"}),console.error("Error al cambiar contraseña:",i)}finally{v.value=!1}}};return(i,t)=>(s(),m("div",q,[t[11]||(t[11]=e("h2",{class:"text-2xl font-bold text-gray-800 dark:text-white mb-6"},"Cambiar Contraseña",-1)),e("form",{onSubmit:j(A,["prevent"]),class:"space-y-4"},[e("div",null,[t[6]||(t[6]=e("label",{for:"currentPassword",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Contraseña Actual ",-1)),e("div",U,[h(C,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=o=>r.value=o),type:w.value?"text":"password",id:"currentPassword",required:""},null,8,["modelValue","type"]),e("button",{type:"button",onClick:t[1]||(t[1]=o=>w.value=!w.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 dark:text-gray-500 focus:outline-none focus:text-gray-300 dark:focus:text-white"},[w.value?(s(),d(c(V),{key:0,class:"h-5 w-5"})):(s(),d(c(P),{key:1,class:"h-5 w-5"}))])])]),e("div",null,[t[8]||(t[8]=e("label",{for:"newPassword",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Nueva Contraseña ",-1)),e("div",E,[h(C,{modelValue:a.value,"onUpdate:modelValue":t[2]||(t[2]=o=>a.value=o),type:x.value?"text":"password",id:"newPassword",required:"",onInput:$},null,8,["modelValue","type"]),e("button",{type:"button",onClick:t[3]||(t[3]=o=>x.value=!x.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 dark:text-gray-500 focus:outline-none focus:text-gray-300 dark:focus:text-white"},[x.value?(s(),d(c(V),{key:0,class:"h-5 w-5"})):(s(),d(c(P),{key:1,class:"h-5 w-5"}))])]),e("div",O,[t[7]||(t[7]=N(" La contraseña debe contener al menos: ")),e("ul",Z,[e("li",{class:k({"text-green-500":p.value,"text-red-500":!p.value})},"8 caracteres",2),e("li",{class:k({"text-green-500":g.value,"text-red-500":!g.value})},"1 número",2),e("li",{class:k({"text-green-500":y.value,"text-red-500":!y.value})},"1 carácter especial",2)])])]),e("div",null,[t[9]||(t[9]=e("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Confirmar Nueva Contraseña ",-1)),e("div",F,[h(C,{modelValue:n.value,"onUpdate:modelValue":t[4]||(t[4]=o=>n.value=o),type:f.value?"text":"password",id:"confirmPassword",required:""},null,8,["modelValue","type"]),e("button",{type:"button",onClick:t[5]||(t[5]=o=>f.value=!f.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 text-gray-500 dark:text-gray-500 focus:outline-none focus:text-gray-300 dark:focus:text-white"},[f.value?(s(),d(c(V),{key:0,class:"h-5 w-5"})):(s(),d(c(P),{key:1,class:"h-5 w-5"}))])]),!B.value&&n.value?(s(),m("p",H," Las contraseñas no coinciden ")):L("",!0)]),e("div",I,[e("button",{type:"submit",disabled:v.value||!M.value,class:"w-full px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition"},[v.value?(s(),m("span",D,t[10]||(t[10]=[e("svg",{class:"animate-spin h-5 w-5 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),N(" Procesando... ")]))):(s(),m("span",G," Cambiar Contraseña "))],8,T)])],32)]))}};export{Q as default};
