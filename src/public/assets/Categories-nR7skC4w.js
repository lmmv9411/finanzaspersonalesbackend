import{r as C,d as w,m,c as f,a as r,D as v,p as _,q as k,u as n,x as B,t as y,F as h,y as E,o as b}from"./index-BiocdtAb.js";import{u as x,S as l}from"./categoriesStore-D9gdB92r.js";function S(){const a=C(""),i=C(!1);let s=null;const o=x(),d=async()=>{if(i.value){g(s);return}try{const t=await m.post("/categories",{name:a.value});console.log("Category created:",t.data),a.value="",o.getCategories()}catch(t){console.error("Error creating category:",t)}},c=async t=>{try{if(!(await l.fire({title:"Eliminar Categoria?",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",theme:"auto"})).isConfirmed){l.fire({title:"No se eliminÃ³!",icon:"info",timer:2e3,theme:"auto",toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0});return}l.fire({title:"Eliminando...",allowOutsideClick:!1,didOpen:()=>{l.showLoading()}}),await m.delete(`/categories/${t}`),o.getCategories(),l.fire({title:"Categoria Eliminada",icon:"success",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"})}catch(e){console.error("Error deleting category:",e),l.fire({title:"Error al eliminar categoria",text:e.response.data.error,icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}},u=t=>{const e=o.categories.findIndex(p=>p.id===t);e!==-1&&(a.value=o.categories[e].name,o.categories.splice(e,1),i.value=!0,s=t)},g=async t=>{try{const e=await m.put(`/categories/${t}`,{name:a.value});console.log("Category updated:",e.data),o.getCategories(),i.value=!1,s=null,a.value=""}catch(e){console.error("Error updating category:",e)}};return w(async()=>o.getCategories()),{name:a,createCategory:d,deleteCategory:c,updateCategory:g,onUpdateCategory:u,isUpdate:i}}const U={class:"flex flex-col gap-8"},N={class:"bg-blue-500 text-white rounded p-2 cursor-pointer"},$={class:"dark:text-white w-fit table-auto border-collapse whitespace-nowrap m-auto overflow-auto"},D={class:"px-4 py-2"},M={class:"px-4 py-2"},T={class:"px-4 py-2 flex gap-2"},q=["onClick"],A=["onClick"],O={__name:"Categories",setup(a){const i=x(),{name:s,createCategory:o,deleteCategory:d,onUpdateCategory:c,isUpdate:u}=S();return(g,t)=>(b(),f(h,null,[t[3]||(t[3]=r("h1",{class:"dark:text-white font-bold text-xl"},"Categorias",-1)),r("div",U,[r("form",{onSubmit:t[1]||(t[1]=v((...e)=>n(o)&&n(o)(...e),["prevent"])),class:"shadow-md p-2 rounded dark:bg-gray-800 bg-slate-100 flex gap-2 dark:text-gray-300 items-start w-fit m-auto flex-wrap"},[_(r("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>B(s)?s.value=e:null),type:"text",placeholder:"Nombre de categoria",class:"p-2 border border-gray-300 dark:bg-gray-900 dark:border-gray-700 border-2 focus:border-gray-300 focus:outline-none focus:border-gray-500 transition-colors duration-300 rounded"},null,512),[[k,n(s)]]),r("button",N,y(n(u)?"Actualizar":"Crear"),1)],32),r("table",$,[t[2]||(t[2]=r("thead",null,[r("tr",{class:"border-b border-gray-400"},[r("th",null,"Id"),r("th",null,"Nombre"),r("th",null,"Acciones")])],-1)),r("tbody",null,[(b(!0),f(h,null,E(n(i).categories,e=>(b(),f("tr",{class:"border-b border-gray-300",key:e.id},[r("td",D,y(e.id),1),r("td",M,y(e.name),1),r("td",T,[r("button",{onClick:p=>n(d)(e.id),class:"bg-red-500 text-white rounded p-2 cursor-pointer"},"Eliminar",8,q),r("button",{onClick:p=>n(c)(e.id),class:"bg-blue-500 text-white rounded p-2 cursor-pointer"},"Editar",8,A)])]))),128))])])])],64))}};export{O as default};
