import{c as a,o,a as t,h as v,F as V,r as H,t as N,n as A,u as e,b as n,i as G,j as M,S as f,I as J,d as S,k as P,D as T,w as k,T as z,z as b}from"./index-BPdY78-P.js";import{I as j}from"./iconify-DySoP6t8.js";import{g as R,c as K}from"./icons-BjrsL8W4.js";import{_ as U}from"./BaseButton-CPmOIHGT.js";import{_ as Q}from"./BaseInput-CVQe5W90.js";import{R as W,r as X,a as Y}from"./RadioButton-1xBJFfZh.js";import{u as q}from"./categoriesStore-RS9JqtRM.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as te}from"./ArrowPathIcon-B8avUI_t.js";function oe(u,c){return o(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M12 1.5a.75.75 0 0 1 .75.75V4.5a.75.75 0 0 1-1.5 0V2.25A.75.75 0 0 1 12 1.5ZM5.636 4.136a.75.75 0 0 1 1.06 0l1.592 1.591a.75.75 0 0 1-1.061 1.06l-1.591-1.59a.75.75 0 0 1 0-1.061Zm12.728 0a.75.75 0 0 1 0 1.06l-1.591 1.592a.75.75 0 0 1-1.06-1.061l1.59-1.591a.75.75 0 0 1 1.061 0Zm-6.816 4.496a.75.75 0 0 1 .82.311l5.228 7.917a.75.75 0 0 1-.777 1.148l-2.097-.43 1.045 3.9a.75.75 0 0 1-1.45.388l-1.044-3.899-1.601 1.42a.75.75 0 0 1-1.247-.606l.569-9.47a.75.75 0 0 1 .554-.68ZM3 10.5a.75.75 0 0 1 .75-.75H6a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 10.5Zm14.25 0a.75.75 0 0 1 .75-.75h2.25a.75.75 0 0 1 0 1.5H18a.75.75 0 0 1-.75-.75Zm-8.962 3.712a.75.75 0 0 1 0 1.061l-1.591 1.591a.75.75 0 1 1-1.061-1.06l1.591-1.592a.75.75 0 0 1 1.06 0Z","clip-rule":"evenodd"})])}function ae(u,c){return o(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M3.28 2.22a.75.75 0 0 0-1.06 1.06l10.5 10.5a.75.75 0 1 0 1.06-1.06l-1.322-1.323a7.012 7.012 0 0 0 2.16-3.11.87.87 0 0 0 0-.567A7.003 7.003 0 0 0 4.82 3.76l-1.54-1.54Zm3.196 3.195 1.135 1.136A1.502 1.502 0 0 1 9.45 8.389l1.136 1.135a3 3 0 0 0-4.109-4.109Z","clip-rule":"evenodd"}),t("path",{d:"m7.812 10.994 1.816 1.816A7.003 7.003 0 0 1 1.38 8.28a.87.87 0 0 1 0-.566 6.985 6.985 0 0 1 1.113-2.039l2.513 2.513a3 3 0 0 0 2.806 2.806Z"})])}function F(u,c){return o(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{d:"M13.488 2.513a1.75 1.75 0 0 0-2.475 0L6.75 6.774a2.75 2.75 0 0 0-.596.892l-.848 2.047a.75.75 0 0 0 .98.98l2.047-.848a2.75 2.75 0 0 0 .892-.596l4.261-4.262a1.75 1.75 0 0 0 0-2.474Z"}),t("path",{d:"M4.75 3.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V9A.75.75 0 0 1 14 9v2.25A2.75 2.75 0 0 1 11.25 14h-6.5A2.75 2.75 0 0 1 2 11.25v-6.5A2.75 2.75 0 0 1 4.75 2H7a.75.75 0 0 1 0 1.5H4.75Z"})])}function D(u,c){return o(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{d:"M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"})])}function re(u,c){return o(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M5 3.25V4H2.75a.75.75 0 0 0 0 1.5h.3l.815 8.15A1.5 1.5 0 0 0 5.357 15h5.285a1.5 1.5 0 0 0 1.493-1.35l.815-8.15h.3a.75.75 0 0 0 0-1.5H11v-.75A2.25 2.25 0 0 0 8.75 1h-1.5A2.25 2.25 0 0 0 5 3.25Zm2.25-.75a.75.75 0 0 0-.75.75V4h3v-.75a.75.75 0 0 0-.75-.75h-1.5ZM6.05 6a.75.75 0 0 1 .787.713l.275 5.5a.75.75 0 0 1-1.498.075l-.275-5.5A.75.75 0 0 1 6.05 6Zm3.9 0a.75.75 0 0 1 .712.787l-.275 5.5a.75.75 0 0 1-1.498-.075l.275-5.5a.75.75 0 0 1 .786-.711Z","clip-rule":"evenodd"})])}const se={class:"max-w-4xl mx-auto"},le={class:"flex gap-4 flex-col"},ne={class:"mb-2 font-medium dark:text-gray-300"},ie={class:"grid grid-cols-6 gap-3 sm:grid-cols-8 md:grid-cols-10"},ce=["onClick"],ue=["title"],de={__name:"IconPickerSolid",emits:["selected","close"],setup(u,{emit:c}){const i=v(null),d=m=>{i.value=m,i.value&&(p("selected",{...i.value}),p("close"))},p=c;return(m,B)=>(o(),a("div",se,[t("div",le,[(o(!0),a(V,null,H(e(K),w=>(o(),a("div",{key:w.name},[t("p",ne,N(w.name),1),t("div",ie,[(o(!0),a(V,null,H(w.icons,g=>{var _,x;return o(),a("div",{onClick:$=>d(g),key:g.name,class:"group flex flex-col items-center"},[t("div",{class:A(["rounded-full p-2 w-10 h-10 flex items-center justify-center transition-all duration-300 group-hover:scale-110 cursor-pointer shadow-xl",[((_=i.value)==null?void 0:_.name)===g.name?"ring-2 ring-indigo-500 scale-110 bg-indigo-100 dark:bg-indigo-900":e(R)(g.icon)]]),title:g.name},[n(e(j),{icon:g.icon,class:A(["w-6 h-6",((x=i.value)==null?void 0:x.name)===g.name?"text-indigo-600 dark:text-indigo-300":"text-white"])},null,8,["icon","class"])],10,ue)],8,ce)}),128))])]))),128))])]))}};function me(){const u=v(""),c=v("ingreso"),i=v(!1),d=v(null),p=q(),m=v({}),B=r=>m.value=r,w=v(!1),g=async()=>{if(i.value){I();return}try{if(u.value===""){f.fire({title:"Nombre Vacío",icon:"error",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"});return}if(!m.value.icon){f.fire({title:"Ícono Vacío",icon:"error",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"});return}f.fire({title:"Creando...",allowOutsideClick:!1,didOpen:()=>{f.showLoading()},theme:"auto"}),await M.post("/categories",{name:u.value,icon:m.value.icon,type:c.value}),f.fire({title:"Categoria Creada",icon:"success",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"}),x()}catch(r){console.error("Error creating category:",r),f.fire({title:"Error al crear categoria",text:r.response.data.error,icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}},_=async r=>{try{if(!(await f.fire({title:"Eliminar Categoria?",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",theme:"auto"})).isConfirmed){f.fire({title:"No se eliminó!",icon:"info",timer:2e3,theme:"auto",toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0});return}f.fire({title:"Eliminando...",allowOutsideClick:!1,didOpen:()=>{f.showLoading()},theme:"auto"}),await M.delete(`/categories/${r}`),p.getCategories(),f.fire({title:"Categoria Eliminada",icon:"success",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"})}catch(h){console.error("Error deleting category:",h),f.fire({title:"Error al eliminar categoria",text:h.response.data.error,icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}},x=()=>{p.getCategories(),i.value=!1,d.value=null,u.value="",m.value.icon=null,m.value.name="",w.value=!1},$=r=>{const h=p.categories.findIndex(E=>E.id===r.id);h!==-1&&(u.value=p.categories[h].name,p.categories.splice(h,1),i.value=!0,d.value=r,m.value.icon=r.icon,c.value=r.type)},I=async()=>{try{await M.put(`/categories/${d.value.id}`,{name:u.value,icon:m.value.icon,type:c.value})}catch(r){console.error("Error updating category:",r)}x()};return G(async()=>p.getCategories()),{name:u,type:c,createCategory:g,deleteCategory:_,updateCategory:I,onUpdateCategory:$,isUpdate:i,selectedIcon:m,handleIconSelected:B,reset:x,showIconPicker:w}}const ge={class:"pt-4 flex flex-col gap-4 px-4 relative items-center"},fe=["title"],pe={class:"flex gap-2"},ve={key:0,class:"flex gap-2 items-center"},he={key:1,class:"flex gap-2 items-center"},we={key:1},xe={class:"dark:text-gray-100"},_e={class:"container max-w-lg mx-auto grid grid-cols-4 gap-4"},Ce=["onClick"],ye={class:"text-xs block w-full text-center break-words text-wrap"},ke={key:0,class:"flex gap-2"},be=["onClick"],Be=["onClick"],$e={__name:"Categories",setup(u){const c=q(),i=v(null),d=v(!1),p=[{value:"ingreso",label:"Ingreso",color:"green",icon:X},{value:"gasto",label:"Gasto",color:"red",icon:Y}],m=C=>{i.value===C?i.value=null:i.value=C},B=C=>{d.value=!0,$(C)},w=()=>{d.value=!1,E()},{name:g,createCategory:_,deleteCategory:x,onUpdateCategory:$,isUpdate:I,selectedIcon:r,handleIconSelected:h,reset:E,showIconPicker:Z,type:y}=me(),L=v([]);return J(()=>{y&&c.categories&&(L.value=c.categories.filter(C=>C.type===y.value))}),(C,s)=>(o(),a(V,null,[s[8]||(s[8]=t("h2",{class:"text-2xl font-semibold mx-auto mt-5 w-fit dark:text-gray-200 text-gray-800"},"Categorias",-1)),t("div",ge,[t("div",{onClick:s[0]||(s[0]=l=>d.value=!d.value),class:"absolute right-4 -top-10 rounded-full bg-indigo-600 p-3 text-white cursor-pointer",title:d.value?"Cerrar":"Crear Nueva Categoria"},[d.value?(o(),S(e(ae),{key:1,class:"w-7 y-7"})):(o(),S(e(D),{key:0,class:"w-7 h-7"}))],8,fe),n(W,{modelValue:e(y),"onUpdate:modelValue":s[1]||(s[1]=l=>T(y)?y.value=l:null),options:p},null,8,["modelValue"]),n(z,{name:"slide-categorie"},{default:k(()=>[d.value?(o(),a("form",{key:0,onSubmit:s[4]||(s[4]=b((...l)=>e(_)&&e(_)(...l),["prevent"])),class:"shadow-lg p-4 rounded-lg dark:bg-gray-800 bg-slate-100 flex flex-wrap gap-2 dark:text-gray-300 items-start m-auto"},[n(Q,{modelValue:e(g),"onUpdate:modelValue":s[2]||(s[2]=l=>T(g)?g.value=l:null),modelModifiers:{trim:!0},placeholder:"Nombre de categoria"},null,8,["modelValue"]),t("div",pe,[n(U,{type:"submit"},{default:k(()=>[e(I)?(o(),a("div",ve,[n(e(F),{class:"w-5 h-5"}),s[6]||(s[6]=t("span",null,"Actualizar",-1))])):(o(),a("div",he,[n(e(D),{class:"w-5 h-5"}),s[7]||(s[7]=t("span",null,"Crear",-1))]))]),_:1}),n(U,{color:"secondary",onClick:s[3]||(s[3]=l=>Z.value=!e(Z)),class:"flex items-center gap-2 p-2 border rounded dark:border-gray-500"},{default:k(()=>[e(r).icon?(o(),a("div",{key:0,class:A(["rounded-full p-2 w-8 h-8 flex items-center justify-center transition-all duration-300 hover:scale-110 cursor-pointer shadow-xl",[e(R)(e(r).icon??"")]])},[n(e(j),{icon:e(r).icon,class:"w-6 h-6 text-white"},null,8,["icon"])],2)):(o(),a("div",we,[n(e(oe),{class:"w-5 h-5"})])),t("span",xe,N(e(r).name||"Icono"),1)]),_:1}),n(U,{color:"danger",onClick:b(w,["stop"]),title:"Reiniciar"},{default:k(()=>[n(e(te),{class:"w-5 h-5"})]),_:1})])],32)):P("",!0)]),_:1}),e(Z)?(o(),S(de,{key:0,onSelected:e(h),onClose:s[5]||(s[5]=l=>Z.value=!1)},null,8,["onSelected"])):P("",!0),t("div",_e,[(o(!0),a(V,null,H(L.value,l=>(o(),a("div",{key:l.id},[t("div",{onClick:b(O=>m(l.id),["stop"]),class:"p-2 rounded-lg dark:border-gray-600 gap-1 flex flex-col justify-between items-center dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors duration-300 shadow-sm cursor-pointer"},[t("div",{class:A([[e(R)(l.icon)],"text-xl rounded-full w-10 h-10 flex items-center justify-center transition-all duration-300 group-hover:scale-110 shadow-xl"])},[n(e(j),{icon:l.icon,class:"text-white"},null,8,["icon"])],2),t("span",ye,N(l.name),1),n(z,{name:"slide-categorie"},{default:k(()=>[l.id===i.value?(o(),a("div",ke,[t("button",{onClick:b(O=>e(x)(l.id),["stop"]),class:"text-red-500 hover:text-red-700 cursor-pointer",title:"Eliminar categoria"},[n(e(re),{class:"h-5 w-5"})],8,be),t("button",{onClick:b(O=>B(l),["stop"]),class:"text-blue-500 hover:text-blue-700 cursor-pointer",title:"Editar categoria"},[n(e(F),{class:"h-5 w-5"})],8,Be)])):P("",!0)]),_:2},1024)],8,Ce)]))),128))])])],64))}},He=ee($e,[["__scopeId","data-v-698ccf35"]]);export{He as default};
