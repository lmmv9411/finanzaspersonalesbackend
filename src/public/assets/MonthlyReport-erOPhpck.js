import{C as w,p as C,f as D,g as B,L as E,h as F,j as S,P as T,k as j}from"./index-CWiznFj5.js";import{i as L,k as O,l as k,s as q,z as v,q as b,h as A,J as V,m as I,c as _,a,t as g,u as n,b as M,w as N,f as P,F as U,r as z,o as x}from"./index-Bynz4OC3.js";const G=async()=>await L.get("/stats/monthly"),R=O("monthlyReport",()=>{const l=k([]);return{monthlyData:l,fetchMonthlyReport:async()=>{const{data:s}=await G();l.value=s}}}),J=()=>{w.register(C,D,B,E,F,S,T);const l=new Intl.DateTimeFormat(navigator.language,{month:"long"}),{fetchMonthlyReport:d}=R(),{monthlyData:s}=q(R()),c=k("ingreso"),p=v(()=>c.value.replace(/^\w/,t=>t.toUpperCase())),y=t=>{const[o,e]=t.split("-"),r=new Date(o,e-1,1);return l.format(r).replace(/^\w/,i=>i.toUpperCase())},h=v(()=>{let t=[],o=[];if(typeof s.value=="object"&&Object.keys(s.value).length>0){if(c.value==="todo")for(const e of["ingreso","gasto","saldo"])t.push(u(e));else t=[u(c.value)];o=Object.keys(s.value).map(e=>y(e))}return{labels:o,datasets:[...t]}}),u=t=>{let o=[],e,r;switch(o=Object.entries(s.value).map(([i,m])=>m[t]),t){case"ingreso":e="#4CAF50",r="#81C784";break;case"gasto":e="#F44336",r="#EF9A9A";break;case"saldo":e="#3F51B5",r="#7986CB";break;default:e="#9E9E9E",r="#E0E0E0"}return{label:t,backgroundColor:r,borderColor:e,data:o,tension:.3}},f=k({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,labels:{color:"#6B7280"}},tooltip:{callbacks:{label:function(t){let o=t.dataset.label||"";return o&&(o+=": "),t.parsed.y!==null&&(o+=b(t.parsed.y)),o}}}},scales:{x:{ticks:{color:"#6B7280"},grid:{color:"#6B7280"}},y:{ticks:{color:"#6B7280",callback:function(t){return b(t)}},grid:{color:"#6B7280"}}}});return{formatoMes:l,fetchMonthlyReport:d,monthlyData:s,formatearMes:y,chartData:h,formatoMoneda:b,chartOptions:f,reportType:c,reportTypeDisplay:p}},H={class:"p-2"},K={class:"text-center text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-4"},Q={class:"bg-slate-100 dark:bg-gray-800 p-4 rounded-lg shadow-md"},W={class:"mt-8"},X={class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-md mb-2 flex gap-4 items-center justify-between"},Y={class:"text-lg font-semibold text-gray-800 dark:text-gray-200"},Z={class:"text-gray-600 dark:text-gray-300"},$={class:"text-green-500 dark:text-green-400"},tt={class:"text-gray-600 dark:text-gray-300"},et={class:"text-red-500 dark:text-red-400"},at={class:"text-gray-600 dark:text-gray-300"},ot={class:"text-indigo-500 dark:text-indigo-300"},nt={__name:"MonthlyReport",setup(l){const{fetchMonthlyReport:d,monthlyData:s,formatearMes:c,formatoMoneda:p,chartData:y,chartOptions:h,reportType:u,reportTypeDisplay:f}=J(),t=V();return A(()=>{u.value=t.query.type||"ingreso",d()}),I(t,()=>{u.value=t.query.type||"ingreso",d()}),(o,e)=>{const r=P("router-link");return x(),_("div",H,[a("h1",K," Reporte Mensual de "+g(n(f)),1),a("div",Q,[M(n(j),{data:n(y),options:n(h)},null,8,["data","options"])]),a("div",W,[M(r,{to:{name:"MonthlyReport",query:{type:"todo"}}},{default:N(()=>e[0]||(e[0]=[a("h2",{class:"text-center text-xl font-semibold text-gray-800 dark:text-gray-200 mb-4",title:"Ver Todos los Reportes Mensuales"}," Detalle Mensual ",-1)])),_:1}),(x(!0),_(U,null,z(n(s),(i,m)=>(x(),_("div",{key:m,class:"mb-4 max-w-xl mx-auto"},[a("div",X,[a("h3",Y,g(n(c)(m)),1),a("p",Z,[e[1]||(e[1]=a("span",null,"Ingresos: ",-1)),a("span",$,g(n(p)(i.ingreso)),1)]),a("p",tt,[e[2]||(e[2]=a("span",null,"Gastos: ",-1)),a("span",et,g(n(p)(i.gasto)),1)]),a("p",at,[e[3]||(e[3]=a("span",null,"Saldo: ",-1)),a("span",ot,g(n(p)(i.saldo)),1)])])]))),128))])])}}};export{nt as default};
