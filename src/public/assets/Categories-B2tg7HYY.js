import{c,o as n,a as r,r as w,i as E,f as g,k as e,n as C,t as y,F as V,g as A,b as N,d as $,S as l,h as U,I as Z,J as j,w as I,M as H,G as L,C as M}from"./index-BnwtM_X7.js";import{I as k}from"./iconify-BUfL6Ga_.js";import{g as b,c as O,u as P}from"./icons-BQcnJwvV.js";import{_ as S}from"./BaseButton-BhkkLOZw.js";import{_ as T}from"./BaseInput-CEAZr8wM.js";function z(d,m){return n(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{d:"M13.488 2.513a1.75 1.75 0 0 0-2.475 0L6.75 6.774a2.75 2.75 0 0 0-.596.892l-.848 2.047a.75.75 0 0 0 .98.98l2.047-.848a2.75 2.75 0 0 0 .892-.596l4.261-4.262a1.75 1.75 0 0 0 0-2.474Z"}),r("path",{d:"M4.75 3.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V9A.75.75 0 0 1 14 9v2.25A2.75 2.75 0 0 1 11.25 14h-6.5A2.75 2.75 0 0 1 2 11.25v-6.5A2.75 2.75 0 0 1 4.75 2H7a.75.75 0 0 1 0 1.5H4.75Z"})])}function D(d,m){return n(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"fill-rule":"evenodd",d:"M5 3.25V4H2.75a.75.75 0 0 0 0 1.5h.3l.815 8.15A1.5 1.5 0 0 0 5.357 15h5.285a1.5 1.5 0 0 0 1.493-1.35l.815-8.15h.3a.75.75 0 0 0 0-1.5H11v-.75A2.25 2.25 0 0 0 8.75 1h-1.5A2.25 2.25 0 0 0 5 3.25Zm2.25-.75a.75.75 0 0 0-.75.75V4h3v-.75a.75.75 0 0 0-.75-.75h-1.5ZM6.05 6a.75.75 0 0 1 .787.713l.275 5.5a.75.75 0 0 1-1.498.075l-.275-5.5A.75.75 0 0 1 6.05 6Zm3.9 0a.75.75 0 0 1 .712.787l-.275 5.5a.75.75 0 0 1-1.498-.075l.275-5.5a.75.75 0 0 1 .786-.711Z","clip-rule":"evenodd"})])}const F={class:"max-w-4xl mx-auto"},R={key:0,class:"sticky top-0 flex gap-3 mb-4 p-3 bg-blue-50 rounded-lg items-center dark:bg-gray-800"},q={class:"font-medium dark:text-gray-300"},G={class:"flex gap-4 flex-col"},J={class:"mb-2 font-medium dark:text-gray-300"},K={class:"grid grid-cols-6 gap-3 sm:grid-cols-8 md:grid-cols-10"},Q=["onClick"],W=["title"],X={__name:"IconPickerSolid",emits:["selected","close"],setup(d,{emit:m}){const a=w(null),u=h=>{a.value=h},i=m,_=()=>{a.value&&(i("selected",{...a.value}),i("close"))};return(h,p)=>(n(),c("div",F,[a.value?(n(),c("div",R,[r("div",{class:C(["rounded-full p-2 w-10 h-10 flex items-center justify-center transition-all",e(b)(a.value.icon)])},[g(e(k),{icon:a.value.icon,class:"text-white w-6 h-6"},null,8,["icon"])],2),r("span",q,y(a.value.name),1),r("button",{onClick:_,class:"ml-auto px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700"}," Usar este icono ")])):E("",!0),r("div",G,[(n(!0),c(V,null,A(e(O),v=>(n(),c("div",{key:v.name},[r("p",J,y(v.name),1),r("div",K,[(n(!0),c(V,null,A(v.icons,s=>{var f,x;return n(),c("div",{onClick:t=>u(s),key:s.name,class:"group flex flex-col items-center"},[r("div",{class:C(["rounded-full p-2 w-10 h-10 flex items-center justify-center transition-all duration-300 group-hover:scale-110 cursor-pointer shadow-xl",[((f=a.value)==null?void 0:f.name)===s.name?"ring-2 ring-indigo-500 scale-110 bg-indigo-100 dark:bg-indigo-900":e(b)(s.icon)]]),title:s.name},[g(e(k),{icon:s.icon,class:C(["w-6 h-6",((x=a.value)==null?void 0:x.name)===s.name?"text-indigo-600 dark:text-indigo-300":"text-white"])},null,8,["icon","class"])],10,W)],8,Q)}),128))])]))),128))])]))}};function Y(){const d=w(""),m=w(!1),a=w(null),u=P(),i=w({}),_=t=>i.value=t,h=w(!1),p=async()=>{if(m.value){x();return}try{if(d.value===""){l.fire({title:"Nombre Vacío",icon:"error",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"});return}if(!i.value.icon){l.fire({title:"Ícono Vacío",icon:"error",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"});return}l.fire({title:"Creando...",allowOutsideClick:!1,didOpen:()=>{l.showLoading()},theme:"auto"}),await $.post("/categories",{name:d.value,icon:i.value.icon}),l.fire({title:"Categoria Creada",icon:"success",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"}),s()}catch(t){console.error("Error creating category:",t),l.fire({title:"Error al crear categoria",text:t.response.data.error,icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}},v=async t=>{try{if(!(await l.fire({title:"Eliminar Categoria?",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",theme:"auto"})).isConfirmed){l.fire({title:"No se eliminó!",icon:"info",timer:2e3,theme:"auto",toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0});return}l.fire({title:"Eliminando...",allowOutsideClick:!1,didOpen:()=>{l.showLoading()},theme:"auto"}),await $.delete(`/categories/${t}`),u.getCategories(),l.fire({title:"Categoria Eliminada",icon:"success",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"})}catch(o){console.error("Error deleting category:",o),l.fire({title:"Error al eliminar categoria",text:o.response.data.error,icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}},s=()=>{u.getCategories(),m.value=!1,a.value=null,d.value="",i.value.icon=null,h.value=!1},f=t=>{const o=u.categories.findIndex(B=>B.id===t.id);o!==-1&&(d.value=u.categories[o].name,u.categories.splice(o,1),m.value=!0,a.value=t,i.value.icon=t.icon)},x=async()=>{try{await $.put(`/categories/${a.value.id}`,{name:d.value,icon:i.value.icon})}catch(t){console.error("Error updating category:",t)}s()};return N(async()=>u.getCategories()),{name:d,createCategory:p,deleteCategory:v,updateCategory:x,onUpdateCategory:f,isUpdate:m,selectedIcon:i,handleIconSelected:_,reset:s,showIconPicker:h}}const ee={class:"pt-4 flex flex-col gap-8 px-4"},te={class:"flex gap-2"},oe={class:"dark:text-gray-100"},re={class:"container max-w-xs mx-auto flex gap-4 flex-col"},ae={class:"text-xl border gap-4 border-gray-200 dark:border-gray-600 rounded-lg flex justify-between p-4 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors duration-300 shadow-sm"},se={class:"flex gap-2"},ne=["onClick"],ie=["onClick"],ge={__name:"Categories",setup(d){const m=P(),{name:a,createCategory:u,deleteCategory:i,onUpdateCategory:_,isUpdate:h,selectedIcon:p,handleIconSelected:v,reset:s,showIconPicker:f}=Y();return(x,t)=>(n(),c("div",ee,[r("form",{onSubmit:t[2]||(t[2]=L((...o)=>e(u)&&e(u)(...o),["prevent"])),class:"shadow-md p-2 rounded dark:bg-gray-800 bg-slate-100 flex flex-wrap gap-2 dark:text-gray-300 items-start m-auto"},[g(T,{modelValue:e(a),"onUpdate:modelValue":t[0]||(t[0]=o=>Z(a)?a.value=o:null),modelModifiers:{trim:!0},placeholder:"Nombre de categoria"},null,8,["modelValue"]),r("div",te,[g(S,{type:"submit"},{default:I(()=>[M(y(e(h)?"Actualizar":"Crear"),1)]),_:1}),j(g(S,{color:"danger",onClick:e(s)},{default:I(()=>t[4]||(t[4]=[M("Cancelar")])),_:1},8,["onClick"]),[[H,e(h)]]),g(S,{color:"secondary",onClick:t[1]||(t[1]=o=>f.value=!e(f)),class:"flex items-center gap-2 p-2 border rounded dark:border-gray-500"},{default:I(()=>[e(p).icon?(n(),c("div",{key:0,class:C(["rounded-full p-2 w-8 h-8 flex items-center justify-center transition-all duration-300 hover:scale-110 cursor-pointer shadow-xl",[e(b)(e(p).icon??"")]])},[g(e(k),{icon:e(p).icon,class:"w-6 h-6 text-white"},null,8,["icon"])],2)):E("",!0),r("span",oe,y(e(p).name||"Icono"),1)]),_:1})])],32),e(f)?(n(),U(X,{key:0,onSelected:e(v),onClose:t[3]||(t[3]=o=>f.value=!1)},null,8,["onSelected"])):E("",!0),r("div",re,[(n(!0),c(V,null,A(e(m).categories,o=>(n(),c("div",{key:o.id},[r("div",ae,[r("div",{class:C([[e(b)(o.icon)],"rounded-full p-2 w-10 h-10 flex items-center justify-center transition-all duration-300 group-hover:scale-110 cursor-pointer shadow-xl"])},[g(e(k),{icon:o.icon,class:"text-white"},null,8,["icon"])],2),r("span",null,y(o.name),1),r("div",se,[r("button",{onClick:B=>e(i)(o.id),class:"text-red-500 hover:text-red-700 cursor-pointer",title:"Eliminar categoria"},[g(e(D),{class:"h-5 w-5"})],8,ne),r("button",{onClick:B=>e(_)(o),class:"text-blue-500 hover:text-blue-700 cursor-pointer",title:"Editar categoria"},[g(e(z),{class:"h-5 w-5"})],8,ie)])])]))),128))])]))}};export{ge as default};
