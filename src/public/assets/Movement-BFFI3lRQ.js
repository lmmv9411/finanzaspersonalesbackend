import{c as x,o as _,a as o,l as S,v as V,p as Z,s as b,q as I,L as E,K as $,t as h,u as e,d as n,w as M,j as D,Q as N,T as R,n as B,E as F,C as U}from"./index-JBPWGaae.js";import{u as L,e as T,C as q}from"./movementStore-eehVr8hO.js";import{_ as k}from"./BaseButton-C9h6oxMv.js";import{_ as C}from"./BaseInput-CHkITzvV.js";import{R as H,r as j,a as A}from"./RadioButton-BpIjS5FB.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as P}from"./ArrowsRightLeftIcon-C5l9FkUP.js";import{r as Q}from"./icons-IfsoPElI.js";import"./iconify-l83mmga9.js";import"./categoriesStore-Bd0uScoB.js";function z(i,l){return _(),x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{d:"M12.75 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM7.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM8.25 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM9.75 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM10.5 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM12.75 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM14.25 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"}),o("path",{"fill-rule":"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z","clip-rule":"evenodd"})])}const J=()=>{const i=S(""),l=L(),{showError:c,showConfirm:u,showInfo:f,showLoading:p,showSuccess:v,close:g}=Z(),y=async t=>{if(l.movement.amount=i.value.replace(/\D/g,""),t&&!(await u("¿Desea Editar Registro?","Sí, Editar","Cancelar")).isConfirmed){d(),f("Edición Cancelada"),history.back();return}p(t?"Editando":"Guardando..."),await l.saveMovement(t),g(),l.isSaved?v(`Movimiento ${t?"editado":"registrado"} correctamente`,!0):c(`Error al ${t?"editar":"registrar"} movimiento`,!0),t&&history.back(),d()},d=()=>{l.movement={type:"ingreso",amount:"",description:"",CategoryId:0,id:"",date:null},i.value="",l.isSaved=!1};function w(t){const s=t.target.value.replace(/\D/g,"");if(s===""){i.value="";return}const m=parseInt(s,10);if(isNaN(m)){i.value="";return}i.value=V(m)}return{movementStore:l,submitForm:y,handleInput:w,valor:i,formatoMoneda:V,resetForm:d}},K={class:"mt-4 max-w-xl mx-4 sm:mx-auto p-4 rounded-lg shadow-lg bg-slate-100 dark:bg-gray-900 dark:text-gray-100 dark:border-gray-700"},O={class:"text-2xl text-center font-semibold mb-4"},W={key:0,class:"w-full"},X={class:"w-full flex justify-between gap-4"},Y={class:"w-full"},ee={class:"w-full"},te={class:"w-full"},ae={class:"flex gap-2"},oe={__name:"Movement",setup(i){const{themePlane:l}=b(I()),c=E(),{isEdit:u=!1}=c.query,f=[{value:"ingreso",label:"Ingreso",color:"green",icon:j},{value:"gasto",label:"Gasto",color:"red",icon:A}],{handleInput:p,formatoMoneda:v,movementStore:g,submitForm:y,valor:d,resetForm:w}=J(),{movement:t,showPicker:s}=b(g);return $(()=>{const m=JSON.parse(sessionStorage.getItem("data"));u&&m&&(sessionStorage.removeItem("data"),s.value=!0,t.value={...m,date:new Date(m.date)},d.value=v(m.amount)),s.value&&!u&&(t.value.date=new Date)}),(m,a)=>(_(),x("div",K,[o("h2",O,h(e(u)?"Editar":"Registrar")+" Movimiento",1),o("form",{onSubmit:a[6]||(a[6]=U(r=>e(y)(e(u)),["prevent"])),class:"flex flex-col gap-4 items-end",autocomplete:"off"},[n(R,{name:"slide-date"},{default:M(()=>[e(s)?(_(),x("div",W,[n(e(N),{dark:e(l)==="dark",modelValue:e(t).date,"onUpdate:modelValue":a[0]||(a[0]=r=>e(t).date=r),format:"EEEE, dd MMM yyyy hh:mm a","format-locale":e(T)},null,8,["dark","modelValue","format-locale"])])):D("",!0)]),_:1}),o("div",X,[n(H,{modelValue:e(t).type,"onUpdate:modelValue":a[1]||(a[1]=r=>e(t).type=r),options:f},null,8,["modelValue"]),o("button",{type:"button",class:"cursor-pointer",onClick:a[2]||(a[2]=r=>s.value=!e(s))},[n(e(z),{class:B(["w-8 h-8",{"text-indigo-500":e(s),"text-green-700":!e(s)}])},null,8,["class"])])]),o("div",Y,[n(q,{modelValue:e(t).CategoryId,"onUpdate:modelValue":a[3]||(a[3]=r=>e(t).CategoryId=r),type:e(t).type},null,8,["modelValue","type"])]),o("div",ee,[a[7]||(a[7]=o("label",{for:"amount",class:"block text-gray-700 dark:text-gray-300"},"Monto",-1)),n(C,{type:"tel",id:"amount",modelValue:e(d),"onUpdate:modelValue":a[4]||(a[4]=r=>F(d)?d.value=r:null),required:"",onInput:e(p)},null,8,["modelValue","onInput"])]),o("div",te,[a[8]||(a[8]=o("label",{for:"description",class:"block text-gray-700 dark:text-gray-300"},"Descripción",-1)),n(C,{id:"description",modelValue:e(t).description,"onUpdate:modelValue":a[5]||(a[5]=r=>e(t).description=r)},null,8,["modelValue"])]),o("div",ae,[n(k,{type:"submit",class:"flex gap-2 items-center"},{default:M(()=>[o("span",null,h(e(u)?"Editar":"Crear")+" Movimiento",1),n(e(P),{class:"w-5 inline"})]),_:1}),n(k,{color:"danger",onClick:e(w),title:"Limpiar Formulario"},{default:M(()=>[n(e(Q),{class:"w-5 h-5"})]),_:1},8,["onClick"])])],32)]))}},pe=G(oe,[["__scopeId","data-v-f4a3a03f"]]);export{pe as default};
