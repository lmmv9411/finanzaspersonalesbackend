import{h as y,d as w,i,A as u,c as b,a as t,g as C,w as _,v as k,f as d,j as E,t as f,F as m,r as $,o as x}from"./index-Ckosf0Vx.js";function U(){const s=y(""),n=y([]),a=y(!1);let c=null;const l=async()=>{try{const e=await i.get(`${u}/categories`);n.value=e.data}catch(e){console.error("Error fetching categories:",e)}},g=async()=>{if(a.value){o(c);return}try{const e=await i.post(`${u}/categories`,{name:s.value});console.log("Category created:",e.data),s.value="",l()}catch(e){console.error("Error creating category:",e)}},p=async e=>{try{const r=await i.delete(`${u}/categories/${e}`);console.log("Category deleted:",r.data),l()}catch(r){console.error("Error deleting category:",r)}},h=e=>{const r=n.value.findIndex(v=>v.id===e);r!==-1&&(s.value=n.value[r].name,n.value.splice(r,1),a.value=!0,c=e)},o=async e=>{try{const r=await i.put(`${u}/categories/${e}`,{name:s.value});console.log("Category updated:",r.data),l(),a.value=!1,c=null,s.value=""}catch(r){console.error("Error updating category:",r)}};return w(async()=>l()),{name:s,categories:n,createCategory:g,deleteCategory:p,updateCategory:o,onUpdateCategory:h,isUpdate:a,getCategories:l}}const A={class:"flex flex-col gap-8"},B={class:"bg-blue-500 text-white rounded p-2 cursor-pointer"},M={class:"dark:text-white w-fit table-auto border-collapse whitespace-nowrap m-auto overflow-auto"},N={class:"px-4 py-2"},S={class:"px-4 py-2"},D={class:"px-4 py-2 flex gap-2"},F=["onClick"],I=["onClick"],R={__name:"Categories",setup(s){const{categories:n,name:a,createCategory:c,deleteCategory:l,onUpdateCategory:g,isUpdate:p}=U();return(h,o)=>(x(),b(m,null,[o[3]||(o[3]=t("h1",{class:"dark:text-white font-bold text-xl"},"Categorias",-1)),t("div",A,[t("form",{onSubmit:o[1]||(o[1]=C((...e)=>d(c)&&d(c)(...e),["prevent"])),class:"shadow-md p-2 rounded dark:bg-gray-800 bg-slate-100 flex gap-2 dark:text-gray-300 items-start w-fit m-auto flex-wrap"},[_(t("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>E(a)?a.value=e:null),type:"text",placeholder:"Nombre de categoria",class:"p-2 border border-gray-300 dark:bg-gray-900 dark:border-gray-700 border-2 focus:border-gray-300 focus:outline-none focus:border-gray-500 transition-colors duration-300 rounded"},null,512),[[k,d(a)]]),t("button",B,f(d(p)?"Actualizar":"Crear"),1)],32),t("table",M,[o[2]||(o[2]=t("thead",null,[t("tr",{class:"border-b border-gray-400"},[t("th",null,"Id"),t("th",null,"Nombre"),t("th",null,"Acciones")])],-1)),t("tbody",null,[(x(!0),b(m,null,$(d(n),e=>(x(),b("tr",{class:"border-b text-center",key:e.id},[t("td",N,f(e.id),1),t("td",S,f(e.name),1),t("td",D,[t("button",{onClick:r=>d(l)(e.id),class:"bg-red-500 text-white rounded p-2 cursor-pointer"},"Eliminar",8,F),t("button",{onClick:r=>d(g)(e.id),class:"bg-blue-500 text-white rounded p-2 cursor-pointer"},"Editar",8,I)])]))),128))])])])],64))}};export{R as default};
