import{c as b,a as s,o as V,l as S,q as C,p as Z,J as I,s as $,K as D,t as h,u as e,b as n,w as M,T as E,n as N,E as R,A as F,j as B}from"./index-Bynz4OC3.js";import{u as T,C as U}from"./movementStore-COGUpbD5.js";import{_ as k}from"./BaseButton-DAiFdybT.js";import{_}from"./BaseInput-Bs69CCxs.js";import{R as A,r as L,a as q}from"./RadioButton-BUtH6ebS.js";import{u as H}from"./useDates-C5zOx99y.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as G}from"./ArrowsRightLeftIcon-DlI0125S.js";import{r as J}from"./icons-DFPeI9cY.js";import"./iconify-KYVFi5b4.js";import"./categoriesStore-Dyd8t4Ft.js";function z(i,l){return V(),b("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{d:"M12.75 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM7.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM8.25 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM9.75 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM10.5 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM12.75 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM14.25 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"}),s("path",{"fill-rule":"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z","clip-rule":"evenodd"})])}const K=()=>{const i=S(""),l=T(),{showError:d,showConfirm:v,showInfo:g,showLoading:y,showSuccess:w,close:x}=Z(),m=async o=>{if(l.movement.amount=i.value.replace(/\D/g,""),o&&!(await v("¿Desea Editar Registro?","Sí, Editar","Cancelar")).isConfirmed){u(),g("Edición Cancelada"),history.back();return}y(o?"Editando":"Guardando..."),await l.saveMovement(o),x(),l.isSaved?w(`Movimiento ${o?"editado":"registrado"} correctamente`,!0):d(`Error al ${o?"editar":"registrar"} movimiento`,!0),o&&history.back(),u()},u=()=>{l.movement={type:"ingreso",amount:"",description:"",CategoryId:0,id:"",date:null},i.value="",l.isSaved=!1};function a(o){const c=o.target.value.replace(/\D/g,"");if(c===""){i.value="";return}const f=parseInt(c,10);if(isNaN(f)){i.value="";return}i.value=C(f)}return{movementStore:l,submitForm:m,handleInput:a,valor:i,formatoMoneda:C,resetForm:u}},O={class:"mt-4 max-w-xl mx-4 sm:mx-auto p-4 rounded-lg shadow-lg bg-slate-100 dark:bg-gray-900 dark:text-gray-100 dark:border-gray-700"},P={class:"text-2xl text-center font-semibold mb-4"},Q={key:0,class:"w-full"},W={class:"w-full flex justify-between gap-4"},X={class:"w-full"},Y={class:"w-full"},ee={class:"w-full"},te={class:"flex gap-2"},oe={__name:"Movement",setup(i){const l=I(),{isEdit:d=!1}=l.query,v=[{value:"ingreso",label:"Ingreso",color:"green",icon:L},{value:"gasto",label:"Gasto",color:"red",icon:q}],{handleInput:g,formatoMoneda:y,movementStore:w,submitForm:x,valor:m,resetForm:u}=K(),{movement:a,showPicker:o}=$(w),{toLocalDateTime:c,getCurrentDateString:f}=H();return D(async()=>{const p=JSON.parse(sessionStorage.getItem("data"));if(d&&p){sessionStorage.removeItem("data"),o.value=!0;const t=c(p.date);a.value={...p,date:t},m.value=y(p.amount)}o.value&&!d&&(a.value.date=f())}),(p,t)=>(V(),b("div",O,[s("h2",P,h(e(d)?"Editar":"Registrar")+" Movimiento",1),s("form",{onSubmit:t[6]||(t[6]=F(r=>e(x)(e(d)),["prevent"])),class:"flex flex-col gap-4 items-end",autocomplete:"off"},[n(E,{name:"slide-date"},{default:M(()=>[e(o)?(V(),b("div",Q,[n(_,{id:"createdAt",type:"datetime-local",modelValue:e(a).date,"onUpdate:modelValue":t[0]||(t[0]=r=>e(a).date=r)},null,8,["modelValue"])])):B("",!0)]),_:1}),s("div",W,[n(A,{modelValue:e(a).type,"onUpdate:modelValue":t[1]||(t[1]=r=>e(a).type=r),options:v},null,8,["modelValue"]),s("button",{type:"button",class:"cursor-pointer",onClick:t[2]||(t[2]=r=>o.value=!e(o))},[n(e(z),{class:N(["w-8 h-8",{"text-indigo-500":e(o),"text-green-700":!e(o)}])},null,8,["class"])])]),s("div",X,[n(U,{modelValue:e(a).CategoryId,"onUpdate:modelValue":t[3]||(t[3]=r=>e(a).CategoryId=r),type:e(a).type},null,8,["modelValue","type"])]),s("div",Y,[t[7]||(t[7]=s("label",{for:"amount",class:"block text-gray-700 dark:text-gray-300"},"Monto",-1)),n(_,{type:"tel",id:"amount",modelValue:e(m),"onUpdate:modelValue":t[4]||(t[4]=r=>R(m)?m.value=r:null),required:"",onInput:e(g)},null,8,["modelValue","onInput"])]),s("div",ee,[t[8]||(t[8]=s("label",{for:"description",class:"block text-gray-700 dark:text-gray-300"},"Descripción",-1)),n(_,{id:"description",modelValue:e(a).description,"onUpdate:modelValue":t[5]||(t[5]=r=>e(a).description=r)},null,8,["modelValue"])]),s("div",te,[n(k,{type:"submit",class:"flex gap-2 items-center"},{default:M(()=>[s("span",null,h(e(d)?"Editar":"Crear")+" Movimiento",1),n(e(G),{class:"w-5 inline"})]),_:1}),n(k,{color:"danger",onClick:e(u),title:"Limpiar Formulario"},{default:M(()=>[n(e(J),{class:"w-5 h-5"})]),_:1},8,["onClick"])])],32)]))}},fe=j(oe,[["__scopeId","data-v-8ae176ae"]]);export{fe as default};
