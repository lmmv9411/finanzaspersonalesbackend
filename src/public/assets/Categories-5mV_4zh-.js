import{r as m,d as h,m as p,c as y,a as r,D as v,p as w,q as _,u as n,x as k,t as b,F as x,y as E,o as f}from"./index-CNFUwRfF.js";import{u as C}from"./categoriesStore-B41FlmDo.js";function U(){const a=m(""),l=m(!1);let s=null;const o=C(),d=async()=>{if(l.value){u(s);return}try{const t=await p.post("/categories",{name:a.value});console.log("Category created:",t.data),a.value="",o.getCategories()}catch(t){console.error("Error creating category:",t)}},i=async t=>{try{const e=await p.delete(`/categories/${t}`);console.log("Category deleted:",e.data),o.getCategories()}catch(e){console.error("Error deleting category:",e)}},c=t=>{const e=o.categories.value.findIndex(g=>g.id===t);e!==-1&&(a.value=o.categories.value[e].name,o.categories.value.splice(e,1),l.value=!0,s=t)},u=async t=>{try{const e=await p.put(`/categories/${t}`,{name:a.value});console.log("Category updated:",e.data),o.getCategories(),l.value=!1,s=null,a.value=""}catch(e){console.error("Error updating category:",e)}};return h(async()=>o.getCategories()),{name:a,createCategory:d,deleteCategory:i,updateCategory:u,onUpdateCategory:c,isUpdate:l}}const S={class:"flex flex-col gap-8"},$={class:"bg-blue-500 text-white rounded p-2 cursor-pointer"},B={class:"dark:text-white w-fit table-auto border-collapse whitespace-nowrap m-auto overflow-auto"},D={class:"px-4 py-2"},M={class:"px-4 py-2"},N={class:"px-4 py-2 flex gap-2"},A=["onClick"],F=["onClick"],z={__name:"Categories",setup(a){const l=C(),{name:s,createCategory:o,deleteCategory:d,onUpdateCategory:i,isUpdate:c}=U();return(u,t)=>(f(),y(x,null,[t[3]||(t[3]=r("h1",{class:"dark:text-white font-bold text-xl"},"Categorias",-1)),r("div",S,[r("form",{onSubmit:t[1]||(t[1]=v((...e)=>n(o)&&n(o)(...e),["prevent"])),class:"shadow-md p-2 rounded dark:bg-gray-800 bg-slate-100 flex gap-2 dark:text-gray-300 items-start w-fit m-auto flex-wrap"},[w(r("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>k(s)?s.value=e:null),type:"text",placeholder:"Nombre de categoria",class:"p-2 border border-gray-300 dark:bg-gray-900 dark:border-gray-700 border-2 focus:border-gray-300 focus:outline-none focus:border-gray-500 transition-colors duration-300 rounded"},null,512),[[_,n(s)]]),r("button",$,b(n(c)?"Actualizar":"Crear"),1)],32),r("table",B,[t[2]||(t[2]=r("thead",null,[r("tr",{class:"border-b border-gray-400"},[r("th",null,"Id"),r("th",null,"Nombre"),r("th",null,"Acciones")])],-1)),r("tbody",null,[(f(!0),y(x,null,E(n(l).categories,e=>(f(),y("tr",{class:"border-b border-gray-300",key:e.id},[r("td",D,b(e.id),1),r("td",M,b(e.name),1),r("td",N,[r("button",{onClick:g=>n(d)(e.id),class:"bg-red-500 text-white rounded p-2 cursor-pointer"},"Eliminar",8,A),r("button",{onClick:g=>n(i)(e.id),class:"bg-blue-500 text-white rounded p-2 cursor-pointer"},"Editar",8,F)])]))),128))])])])],64))}};export{z as default};
