import{C as w,p as D,f as B,g as C,L as E,h as F,j as S,P as T,k as A}from"./index-Buvz9YKA.js";import{j as L,l as j,h as k,A as O,y as _,q as m,i as I,H as q,c as x,a as t,t as y,u as o,b as G,F as N,r as P,o as f}from"./index-DnrQHNHf.js";const V=async()=>await L.get("/stats/monthly"),v=j("monthlyReport",()=>{const n=k([]);return{monthlyData:n,fetchMonthlyReport:async()=>{const{data:s}=await V();n.value=s}}}),H=()=>{w.register(D,B,C,E,F,S,T);const n=new Intl.DateTimeFormat(navigator.language,{month:"long"}),{fetchMonthlyReport:p}=v(),{monthlyData:s}=O(v()),d=k("ingreso"),c=_(()=>{switch(d.value){case"ingreso":return"Ingresos";case"gasto":return"Gastos";case"saldo":return"Saldo";default:return""}}),u=e=>{const[r,l]=e.split("-"),a=new Date(r,l-1,1);return n.format(a)},b=_(()=>{let e=[],r=[];s.value&&(e=Object.entries(s.value).map(([i,g])=>g[d.value]),r=Object.keys(s.value).map(i=>{const[g,M]=i.split("-"),R=new Date(g,M-1,1);return n.format(R)}));let l,a;switch(d.value){case"ingreso":l="#4CAF50",a="#81C784";break;case"gasto":l="#F44336",a="#EF9A9A";break;case"saldo":l="#3F51B5",a="#7986CB";break;default:l="#9E9E9E",a="#E0E0E0"}return{labels:r,datasets:[{label:c.value,backgroundColor:a,borderColor:l,data:e,tension:.3}]}}),h=k({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,labels:{color:"#6B7280"}},tooltip:{callbacks:{label:function(e){let r=e.dataset.label||"";return r&&(r+=": "),e.parsed.y!==null&&(r+=m(e.parsed.y)),r}}}},scales:{x:{ticks:{color:"#6B7280"},grid:{color:"#6B7280"}},y:{ticks:{color:"#6B7280",callback:function(e){return m(e)}},grid:{color:"#6B7280"}}}});return{formatoMes:n,fetchMonthlyReport:p,monthlyData:s,formatearMes:u,chartData:b,formatoMoneda:m,chartOptions:h,reportType:d,reportTypeDisplay:c}},z={class:"p-2"},J={class:"text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-4"},K={class:"bg-slate-100 dark:bg-gray-800 p-4 rounded-lg shadow-md"},Q={class:"mt-8"},U={class:"overflow-x-auto"},W={class:"min-w-full bg-white dark:bg-gray-700 rounded-lg shadow-md"},X={class:"py-2 px-4 border-b border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200"},Y={class:"py-2 px-4 border-b border-gray-300 dark:border-gray-600 text-green-500 dark:text-green-400"},Z={class:"py-2 px-4 border-b border-gray-300 dark:border-gray-600 text-red-500 dark:text-red-400"},$={class:"py-2 px-4 border-b border-gray-300 dark:border-gray-600 text-indigo-500 dark:text-indigo-300"},at={__name:"MonthlyReport",setup(n){const{fetchMonthlyReport:p,monthlyData:s,formatearMes:d,formatoMoneda:c,chartData:u,chartOptions:b,reportType:h,reportTypeDisplay:e}=H(),r=q();return I(()=>{h.value=r.query.type||"ingreso",p()}),(l,a)=>(f(),x("div",z,[t("h1",J,"Reporte Mensual de "+y(o(e)),1),t("div",K,[G(o(A),{data:o(u),options:o(b)},null,8,["data","options"])]),t("div",Q,[a[1]||(a[1]=t("h2",{class:"text-xl font-semibold text-gray-800 dark:text-gray-200 mb-4"},"Detalle Mensual",-1)),t("div",U,[t("table",W,[a[0]||(a[0]=t("thead",null,[t("tr",null,[t("th",{class:"py-2 px-4 border-b dark:border-gray-600 text-left text-gray-600 dark:text-gray-300"}," Mes"),t("th",{class:"py-2 px-4 border-b dark:border-gray-600 text-left text-gray-600 dark:text-gray-300"}," Ingresos"),t("th",{class:"py-2 px-4 border-b dark:border-gray-600 text-left text-gray-600 dark:text-gray-300"}," Gastos"),t("th",{class:"py-2 px-4 border-b dark:border-gray-600 text-left text-gray-600 dark:text-gray-300"}," Saldo")])],-1)),t("tbody",null,[(f(!0),x(N,null,P(o(s),(i,g)=>(f(),x("tr",{key:g,class:"hover:bg-gray-50 dark:hover:bg-gray-600"},[t("td",X,y(o(d)(g)),1),t("td",Y,y(o(c)(i.ingreso)),1),t("td",Z,y(o(c)(i.gasto)),1),t("td",$,y(o(c)(i.saldo)),1)]))),128))])])])])]))}};export{at as default};
