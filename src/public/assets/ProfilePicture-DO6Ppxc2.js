import{c as u,o as d,a as r,l as c,s as y,t as g,u as i,d as a,w as v,y as C,i as B,B as S,g as I}from"./index-JBPWGaae.js";import{I as U}from"./iconify-l83mmga9.js";import{_ as w}from"./BaseButton-C9h6oxMv.js";import{u as $,_ as F}from"./ToggleTheme--MHoCQX3.js";function R(f,s){return d(),u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})])}const V={class:"min-w-xs mx-auto mt-10 p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-lg"},j={class:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-100 text-center"},E={class:"flex flex-col items-center gap-4"},L={class:"relative"},N=["src"],P={__name:"ProfilePictureUploader",setup(f){const s=c(null),t=c(null),l=c(!1),o=c(null),{user:m,profileUrl:p}=y($());function x(){s.value.click()}function k(n){const e=n.target.files[0];e&&(t.value=e,o.value=URL.createObjectURL(e))}async function b(){if(!t.value)return;l.value=!0;const n=new FormData;n.append("image",t.value);try{const{data:e}=await B.post("/user/upload-profile-pic",n,{headers:{"Content-Type":"multipart/form-data"}});e.url?(p.value=`${S}${e.url}`,o.value=null,t.value=null):Swal.fire({title:"Error al subir foto",icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}catch(e){console.error(e),Swal.fire({title:"Error al subir foto",text:e.response.data.error,icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}finally{l.value=!1}}return(n,e)=>{var _,h;return d(),u("div",V,[r("h2",j,g(((_=i(m))==null?void 0:_.name)+" "+((h=i(m))==null?void 0:h.lastName)),1),r("div",E,[r("div",L,[r("img",{src:o.value||i(p),alt:"Foto de perfil",class:"w-32 h-32 rounded-full object-cover border-4 border-gray-300 dark:border-gray-600 shadow"},null,8,N),r("input",{ref_key:"fileInput",ref:s,type:"file",accept:"image/*",class:"hidden",onChange:k},null,544),a(i(U),{icon:"mdi:edit",onClick:x,class:"cursor-pointer w-6 h-6 text-gray-500 dark:text-white absolute -top-2 -right-2 hover:text-indigo-500 shadow:lg transition duration-300"})]),a(w,{onClick:b,disabled:!t.value||l.value},{default:v(()=>[C(g(l.value?"Subiendo...":"Guardar"),1)]),_:1},8,["disabled"])])])}}},A={class:"flex flex-col gap-4 items-center"},M={__name:"ProfilePicture",setup(f){const s=I(),t=()=>{localStorage.removeItem("jwt_token"),s.push({name:"Login"})};return(l,o)=>(d(),u("div",A,[a(P),a(w,{onClick:t,color:"secondary",class:"flex gap-2 items-center sm:hidden"},{default:v(()=>[a(i(R),{class:"w-5 h-5 inline-block"}),o[0]||(o[0]=r("span",null,"Cerrar SesiÃ³n",-1))]),_:1}),a(F,{class:"sm:hidden"})]))}};export{M as default};
