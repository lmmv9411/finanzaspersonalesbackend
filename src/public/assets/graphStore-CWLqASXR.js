import{P as f,h as s,x as g,j as y,S as i}from"./index-BL5VuITI.js";const h=f("balance",()=>{const a=s(""),o=s(""),l=s({totalIngreso:0,totalGasto:0,balance:0}),c=s(function(){const t=new Date,r=t.getFullYear(),e=String(t.getMonth()+1).padStart(2,"0");return a.value=`${r}-${e}-01 00:00:00`,o.value=new Date(r,e,0).toISOString().split("T")[0]+" 23:59:59",`${r}-${e}`}());g(c,t=>{const[r,e]=t.split("-");a.value=`${r}-${e}-01 00:00:00`,o.value=new Date(r,e,0).toISOString().split("T")[0]+" 23:59:59"}),g([a,o],async()=>await u());const u=async()=>{try{const t=await y.get(`/movements/balance?startDate=${a.value}&endDate=${o.value}`);l.value=t.data}catch(t){console.error("Error al obtener el balance:",t),i.fire({title:"Error al obtener balance",icon:"error",toast:!0,position:"top",timer:3e3,showConfirmButton:!1,timerProgressBar:!0})}};return{selectedMonth:c,startDate:a,endDate:o,balance:l,fetchBalance:u}}),p=f("graph",()=>{const a=h(),o=s({labels:[],datasets:[{label:"total",data:[],backgroundColor:["#60a5fa","#f87171","#34d399","#fbbf24","#a78bfa","#fb7185","#facc15","#38bdf8"]}]}),l=s({labels:[],datasets:[{label:"total",data:[],backgroundColor:["#60a5fa","#f87171","#34d399","#fbbf24","#a78bfa","#fb7185","#facc15","#38bdf8"]}]}),d=s(0),c=s(1),u=async()=>{const t=a.startDate,r=a.endDate;try{const e=await y.get(`/stats/totalByCategory?startDate=${t}&endDate=${r}`),{data:b}=e;l.value.labels=b.totalGastoByCategory.map(n=>n.Category.name),l.value.datasets[0].data=b.totalGastoByCategory.map(n=>Number(n.total)),o.value.labels=b.totalIngresoByCategory.map(n=>n.Category.name),o.value.datasets[0].data=b.totalIngresoByCategory.map(n=>Number(n.total)),d.value+=1,c.value+=1}catch(e){console.error("Error al cargar datos del grÃ¡fico:",e)}};return g(()=>[a.startDate,a.endDate],()=>u()),{chartDataIngreso:o,chartDataGasto:l,getTotalByCategory:u,chartKeyA:d,chartKeyB:c}});export{p as a,h as u};
