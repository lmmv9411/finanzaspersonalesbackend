import{c as x,o as _,a,l as Z,v as V,p as I,s as k,q as E,L as $,K as D,r as N,t as b,u as e,d as n,w as M,j as R,T as B,n as F,E as U,C as L}from"./index-2Nd8jLvV.js";import{u as P,C as T}from"./movementStore-BUK4_U4g.js";import{_ as h}from"./BaseButton-ClKsn52P.js";import{_ as C}from"./BaseInput-Do3h0sJd.js";import{R as q,r as H,a as j}from"./RadioButton-D__2m86D.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as G}from"./ArrowsRightLeftIcon-CgVnlsyN.js";import{r as z}from"./icons-Dk--Jyq9.js";import{e as J}from"./es-Quj2WRNv.js";import"./iconify-C7P-9Y9H.js";import"./categoriesStore-D10yB8fK.js";function K(i,l){return _(),x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{d:"M12.75 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM7.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM8.25 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM9.75 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM10.5 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM12.75 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM14.25 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"}),a("path",{"fill-rule":"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z","clip-rule":"evenodd"})])}const O=()=>{const i=Z(""),l=P(),{showError:c,showConfirm:u,showInfo:p,showLoading:f,showSuccess:v,close:g}=I(),y=async o=>{if(l.movement.amount=i.value.replace(/\D/g,""),o&&!(await u("¿Desea Editar Registro?","Sí, Editar","Cancelar")).isConfirmed){d(),p("Edición Cancelada"),history.back();return}f(o?"Editando":"Guardando..."),await l.saveMovement(o),g(),l.isSaved?v(`Movimiento ${o?"editado":"registrado"} correctamente`,!0):c(`Error al ${o?"editar":"registrar"} movimiento`,!0),o&&history.back(),d()},d=()=>{l.movement={type:"ingreso",amount:"",description:"",CategoryId:0,id:"",date:null},i.value="",l.isSaved=!1};function w(o){const r=o.target.value.replace(/\D/g,"");if(r===""){i.value="";return}const m=parseInt(r,10);if(isNaN(m)){i.value="";return}i.value=V(m)}return{movementStore:l,submitForm:y,handleInput:w,valor:i,formatoMoneda:V,resetForm:d}},Q={class:"mt-4 max-w-xl mx-4 sm:mx-auto p-4 rounded-lg shadow-lg bg-slate-100 dark:bg-gray-900 dark:text-gray-100 dark:border-gray-700"},W={class:"text-2xl text-center font-semibold mb-4"},X={key:0,class:"w-full"},Y={class:"w-full flex justify-between gap-4"},ee={class:"w-full"},oe={class:"w-full"},te={class:"w-full"},ae={class:"flex gap-2"},re={__name:"Movement",setup(i){const{themePlane:l}=k(E()),c=$(),{isEdit:u=!1}=c.query,p=[{value:"ingreso",label:"Ingreso",color:"green",icon:H},{value:"gasto",label:"Gasto",color:"red",icon:j}],{handleInput:f,formatoMoneda:v,movementStore:g,submitForm:y,valor:d,resetForm:w}=O(),{movement:o,showPicker:r}=k(g);return D(()=>{const m=JSON.parse(sessionStorage.getItem("data"));u&&m&&(sessionStorage.removeItem("data"),r.value=!0,o.value={...m,date:new Date(m.date)},d.value=v(m.amount)),r.value&&!u&&(o.value.date=new Date)}),(m,t)=>{const S=N("VueDatePicker");return _(),x("div",Q,[a("h2",W,b(e(u)?"Editar":"Registrar")+" Movimiento",1),a("form",{onSubmit:t[6]||(t[6]=L(s=>e(y)(e(u)),["prevent"])),class:"flex flex-col gap-4 items-end",autocomplete:"off"},[n(B,{name:"slide-date"},{default:M(()=>[e(r)?(_(),x("div",X,[n(S,{dark:e(l)==="dark",modelValue:e(o).date,"onUpdate:modelValue":t[0]||(t[0]=s=>e(o).date=s),format:"EEEE, dd MMM yyyy hh:mm a","format-locale":e(J)},null,8,["dark","modelValue","format-locale"])])):R("",!0)]),_:1}),a("div",Y,[n(q,{modelValue:e(o).type,"onUpdate:modelValue":t[1]||(t[1]=s=>e(o).type=s),options:p},null,8,["modelValue"]),a("button",{type:"button",class:"cursor-pointer",onClick:t[2]||(t[2]=s=>r.value=!e(r))},[n(e(K),{class:F(["w-8 h-8",{"text-indigo-500":e(r),"text-green-700":!e(r)}])},null,8,["class"])])]),a("div",ee,[n(T,{modelValue:e(o).CategoryId,"onUpdate:modelValue":t[3]||(t[3]=s=>e(o).CategoryId=s),type:e(o).type},null,8,["modelValue","type"])]),a("div",oe,[t[7]||(t[7]=a("label",{for:"amount",class:"block text-gray-700 dark:text-gray-300"},"Monto",-1)),n(C,{type:"tel",id:"amount",modelValue:e(d),"onUpdate:modelValue":t[4]||(t[4]=s=>U(d)?d.value=s:null),required:"",onInput:e(f)},null,8,["modelValue","onInput"])]),a("div",te,[t[8]||(t[8]=a("label",{for:"description",class:"block text-gray-700 dark:text-gray-300"},"Descripción",-1)),n(C,{id:"description",modelValue:e(o).description,"onUpdate:modelValue":t[5]||(t[5]=s=>e(o).description=s)},null,8,["modelValue"])]),a("div",ae,[n(h,{type:"submit",class:"flex gap-2 items-center"},{default:M(()=>[a("span",null,b(e(u)?"Editar":"Crear")+" Movimiento",1),n(e(G),{class:"w-5 inline"})]),_:1}),n(h,{color:"danger",onClick:e(w),title:"Limpiar Formulario"},{default:M(()=>[n(e(z),{class:"w-5 h-5"})]),_:1},8,["onClick"])])],32)])}}},ge=A(re,[["__scopeId","data-v-819859e9"]]);export{ge as default};
