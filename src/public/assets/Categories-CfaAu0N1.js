import{c as s,a as t,o,h as x,k as $,b as g,u as e,n as I,t as S,F as N,r as j,i as F,j as M,S as f,d as P,w as b,T,G as B,I as z,J as D,C as H,O as R}from"./index-BL5VuITI.js";import{I as E}from"./iconify-DOrx9CrQ.js";import{g as V,c as q}from"./icons-BjrsL8W4.js";import{_ as U}from"./BaseButton-BMw9tWQq.js";import{_ as G}from"./BaseInput-DuZFlr0I.js";import{u as L}from"./categoriesStore-D2-KzUQk.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";function K(c,u){return o(),s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M3.28 2.22a.75.75 0 0 0-1.06 1.06l10.5 10.5a.75.75 0 1 0 1.06-1.06l-1.322-1.323a7.012 7.012 0 0 0 2.16-3.11.87.87 0 0 0 0-.567A7.003 7.003 0 0 0 4.82 3.76l-1.54-1.54Zm3.196 3.195 1.135 1.136A1.502 1.502 0 0 1 9.45 8.389l1.136 1.135a3 3 0 0 0-4.109-4.109Z","clip-rule":"evenodd"}),t("path",{d:"m7.812 10.994 1.816 1.816A7.003 7.003 0 0 1 1.38 8.28a.87.87 0 0 1 0-.566 6.985 6.985 0 0 1 1.113-2.039l2.513 2.513a3 3 0 0 0 2.806 2.806Z"})])}function Q(c,u){return o(),s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{d:"M13.488 2.513a1.75 1.75 0 0 0-2.475 0L6.75 6.774a2.75 2.75 0 0 0-.596.892l-.848 2.047a.75.75 0 0 0 .98.98l2.047-.848a2.75 2.75 0 0 0 .892-.596l4.261-4.262a1.75 1.75 0 0 0 0-2.474Z"}),t("path",{d:"M4.75 3.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V9A.75.75 0 0 1 14 9v2.25A2.75 2.75 0 0 1 11.25 14h-6.5A2.75 2.75 0 0 1 2 11.25v-6.5A2.75 2.75 0 0 1 4.75 2H7a.75.75 0 0 1 0 1.5H4.75Z"})])}function W(c,u){return o(),s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{d:"M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"})])}function X(c,u){return o(),s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M5 3.25V4H2.75a.75.75 0 0 0 0 1.5h.3l.815 8.15A1.5 1.5 0 0 0 5.357 15h5.285a1.5 1.5 0 0 0 1.493-1.35l.815-8.15h.3a.75.75 0 0 0 0-1.5H11v-.75A2.25 2.25 0 0 0 8.75 1h-1.5A2.25 2.25 0 0 0 5 3.25Zm2.25-.75a.75.75 0 0 0-.75.75V4h3v-.75a.75.75 0 0 0-.75-.75h-1.5ZM6.05 6a.75.75 0 0 1 .787.713l.275 5.5a.75.75 0 0 1-1.498.075l-.275-5.5A.75.75 0 0 1 6.05 6Zm3.9 0a.75.75 0 0 1 .712.787l-.275 5.5a.75.75 0 0 1-1.498-.075l.275-5.5a.75.75 0 0 1 .786-.711Z","clip-rule":"evenodd"})])}const Y={class:"max-w-4xl mx-auto"},ee={key:0,class:"sticky top-0 flex gap-3 mb-4 p-3 bg-blue-50 rounded-lg items-center dark:bg-gray-800"},te={class:"font-medium dark:text-gray-300"},oe={class:"flex gap-4 flex-col"},ae={class:"mb-2 font-medium dark:text-gray-300"},re={class:"grid grid-cols-6 gap-3 sm:grid-cols-8 md:grid-cols-10"},se=["onClick"],ne=["title"],ie={__name:"IconPickerSolid",emits:["selected","close"],setup(c,{emit:u}){const a=x(null),n=w=>{a.value=w},d=u,y=()=>{a.value&&(d("selected",{...a.value}),d("close"))};return(w,_)=>(o(),s("div",Y,[a.value?(o(),s("div",ee,[t("div",{class:I(["rounded-full p-2 w-10 h-10 flex items-center justify-center transition-all",e(V)(a.value.icon)])},[g(e(E),{icon:a.value.icon,class:"text-white w-6 h-6"},null,8,["icon"])],2),t("span",te,S(a.value.name),1),t("button",{onClick:y,class:"ml-auto px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700"}," Usar este icono ")])):$("",!0),t("div",oe,[(o(!0),s(N,null,j(e(q),p=>(o(),s("div",{key:p.name},[t("p",ae,S(p.name),1),t("div",re,[(o(!0),s(N,null,j(p.icons,l=>{var C,v;return o(),s("div",{onClick:r=>n(l),key:l.name,class:"group flex flex-col items-center"},[t("div",{class:I(["rounded-full p-2 w-10 h-10 flex items-center justify-center transition-all duration-300 group-hover:scale-110 cursor-pointer shadow-xl",[((C=a.value)==null?void 0:C.name)===l.name?"ring-2 ring-indigo-500 scale-110 bg-indigo-100 dark:bg-indigo-900":e(V)(l.icon)]]),title:l.name},[g(e(E),{icon:l.icon,class:I(["w-6 h-6",((v=a.value)==null?void 0:v.name)===l.name?"text-indigo-600 dark:text-indigo-300":"text-white"])},null,8,["icon","class"])],10,ne)],8,se)}),128))])]))),128))])]))}};function le(){const c=x(""),u=x(!1),a=x(null),n=L(),d=x({}),y=r=>d.value=r,w=x(!1),_=async()=>{if(u.value){v();return}try{if(c.value===""){f.fire({title:"Nombre Vacío",icon:"error",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"});return}if(!d.value.icon){f.fire({title:"Ícono Vacío",icon:"error",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"});return}f.fire({title:"Creando...",allowOutsideClick:!1,didOpen:()=>{f.showLoading()},theme:"auto"}),await M.post("/categories",{name:c.value,icon:d.value.icon}),f.fire({title:"Categoria Creada",icon:"success",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"}),l()}catch(r){console.error("Error creating category:",r),f.fire({title:"Error al crear categoria",text:r.response.data.error,icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}},p=async r=>{try{if(!(await f.fire({title:"Eliminar Categoria?",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",theme:"auto"})).isConfirmed){f.fire({title:"No se eliminó!",icon:"info",timer:2e3,theme:"auto",toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0});return}f.fire({title:"Eliminando...",allowOutsideClick:!1,didOpen:()=>{f.showLoading()},theme:"auto"}),await M.delete(`/categories/${r}`),n.getCategories(),f.fire({title:"Categoria Eliminada",icon:"success",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"})}catch(h){console.error("Error deleting category:",h),f.fire({title:"Error al eliminar categoria",text:h.response.data.error,icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}},l=()=>{n.getCategories(),u.value=!1,a.value=null,c.value="",d.value.icon=null,w.value=!1},C=r=>{const h=n.categories.findIndex(Z=>Z.id===r.id);h!==-1&&(c.value=n.categories[h].name,n.categories.splice(h,1),u.value=!0,a.value=r,d.value.icon=r.icon)},v=async()=>{try{await M.put(`/categories/${a.value.id}`,{name:c.value,icon:d.value.icon})}catch(r){console.error("Error updating category:",r)}l()};return F(async()=>n.getCategories()),{name:c,createCategory:_,deleteCategory:p,updateCategory:v,onUpdateCategory:C,isUpdate:u,selectedIcon:d,handleIconSelected:y,reset:l,showIconPicker:w}}const ce={class:"pt-4 flex flex-col gap-4 px-4 items-end"},ue={class:"flex gap-2"},de={class:"dark:text-gray-100"},me={class:"container max-w-lg mx-auto grid grid-cols-4 gap-4"},fe=["onClick"],ge={class:"text-xs"},he={key:0,class:"flex gap-2"},pe=["onClick"],ve=["onClick"],xe={__name:"Categories",setup(c){const u=L(),a=x(null),n=x(!1),d=k=>{a.value===k?a.value=null:a.value=k},y=k=>{n.value=!0,C(k)},w=()=>{n.value=!1,Z()},{name:_,createCategory:p,deleteCategory:l,onUpdateCategory:C,isUpdate:v,selectedIcon:r,handleIconSelected:h,reset:Z,showIconPicker:A}=le();return(k,m)=>(o(),s("div",ce,[t("div",{onClick:m[0]||(m[0]=i=>n.value=!n.value),class:"rounded-full bg-indigo-600 p-3 text-white cursor-pointer"},[n.value?(o(),P(e(K),{key:1,class:"w-7 y-7"})):(o(),P(e(W),{key:0,class:"w-7 h-7"}))]),g(T,{name:"slide-categorie"},{default:b(()=>[n.value?(o(),s("form",{key:0,onSubmit:m[3]||(m[3]=B((...i)=>e(p)&&e(p)(...i),["prevent"])),class:"shadow-md p-4 rounded dark:bg-gray-800 bg-slate-100 flex flex-wrap gap-2 dark:text-gray-300 items-start m-auto"},[g(G,{modelValue:e(_),"onUpdate:modelValue":m[1]||(m[1]=i=>z(_)?_.value=i:null),modelModifiers:{trim:!0},placeholder:"Nombre de categoria"},null,8,["modelValue"]),t("div",ue,[g(U,{type:"submit"},{default:b(()=>[H(S(e(v)?"Actualizar":"Crear"),1)]),_:1}),g(U,{color:"secondary",onClick:m[2]||(m[2]=i=>A.value=!e(A)),class:"flex items-center gap-2 p-2 border rounded dark:border-gray-500"},{default:b(()=>[e(r).icon?(o(),s("div",{key:0,class:I(["rounded-full p-2 w-8 h-8 flex items-center justify-center transition-all duration-300 hover:scale-110 cursor-pointer shadow-xl",[e(V)(e(r).icon??"")]])},[g(e(E),{icon:e(r).icon,class:"w-6 h-6 text-white"},null,8,["icon"])],2)):$("",!0),t("span",de,S(e(r).name||"Icono"),1)]),_:1}),D(g(U,{color:"danger",onClick:B(w,["stop"])},{default:b(()=>m[5]||(m[5]=[H("Cancelar")])),_:1},512),[[R,e(v)]])])],32)):$("",!0)]),_:1}),e(A)?(o(),P(ie,{key:0,onSelected:e(h),onClose:m[4]||(m[4]=i=>A.value=!1)},null,8,["onSelected"])):$("",!0),t("div",me,[(o(!0),s(N,null,j(e(u).categories,i=>(o(),s("div",{key:i.id},[t("div",{onClick:B(O=>d(i.id),["stop"]),class:"rounded-lg dark:border-gray-600 gap-1 flex flex-col justify-between items-center p-4 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors duration-300 shadow-sm"},[t("div",{class:I([[e(V)(i.icon)],"text-xl rounded-full p-2 w-10 h-10 flex items-center justify-center transition-all duration-300 group-hover:scale-110 cursor-pointer shadow-xl"])},[g(e(E),{icon:i.icon,class:"text-white"},null,8,["icon"])],2),t("span",ge,S(i.name),1),g(T,{name:"slide-categorie"},{default:b(()=>[i.id===a.value?(o(),s("div",he,[t("button",{onClick:B(O=>e(l)(i.id),["stop"]),class:"text-red-500 hover:text-red-700 cursor-pointer",title:"Eliminar categoria"},[g(e(X),{class:"h-5 w-5"})],8,pe),t("button",{onClick:B(O=>y(i),["stop"]),class:"text-blue-500 hover:text-blue-700 cursor-pointer",title:"Editar categoria"},[g(e(Q),{class:"h-5 w-5"})],8,ve)])):$("",!0)]),_:2},1024)],8,fe)]))),128))])]))}},$e=J(xe,[["__scopeId","data-v-01a5ef32"]]);export{$e as default};
