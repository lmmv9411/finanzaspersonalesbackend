import{c as f,o as m,a,h as s,B as d,i as $,j as g,t as v,b as n,u as w,w as x,v as B,g as I}from"./index-Alo5diMo.js";import{I as S}from"./iconify-Dvzc_v7Y.js";import{_ as b}from"./BaseButton-Bd1Pop9m.js";import{_ as j}from"./ToggleTheme-b8y3e1Rr.js";function F(p,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})])}const P={class:"min-w-xs mx-auto mt-10 p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-lg"},U={class:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-100 text-center"},V={class:"flex flex-col items-center gap-4"},E={class:"relative"},L=["src"],N={__name:"ProfilePictureUploader",setup(p){const o=s(`${d}/uploads/default.jpg`),i=s(null),r=s(null),l=s(null),c=s(!1),u=s(null);function k(){i.value.click()}function y(t){const e=t.target.files[0];e&&(r.value=e,l.value=URL.createObjectURL(e))}async function C(){if(!r.value)return;c.value=!0;const t=new FormData;t.append("image",r.value);try{const{data:e}=await g.post("/user/upload-profile-pic",t,{headers:{"Content-Type":"multipart/form-data"}});e.url?(o.value=`${d}${e.url}`,l.value=null,r.value=null):Swal.fire({title:"Error al subir foto",icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}catch(e){console.error(e),Swal.fire({title:"Error al subir foto",text:e.response.data.error,icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}finally{c.value=!1}}return $(async()=>{const{data:t}=await g.get("/user");u.value=t,o.value=`${d}${t.profilePicture}`}),(t,e)=>{var _,h;return m(),f("div",P,[a("h2",U,v(((_=u.value)==null?void 0:_.name)+" "+((h=u.value)==null?void 0:h.lastName)),1),a("div",V,[a("div",E,[a("img",{src:l.value||o.value,alt:"Foto de perfil",class:"w-32 h-32 rounded-full object-cover border-4 border-gray-300 dark:border-gray-600 shadow"},null,8,L),a("input",{ref_key:"fileInput",ref:i,type:"file",accept:"image/*",class:"hidden",onChange:y},null,544),n(w(S),{icon:"mdi:edit",onClick:k,class:"cursor-pointer w-6 h-6 text-gray-500 dark:text-white absolute -top-2 -right-2 hover:text-indigo-500 shadow:lg transition duration-300"})]),n(b,{onClick:C,disabled:!r.value||c.value},{default:x(()=>[B(v(c.value?"Subiendo...":"Guardar"),1)]),_:1},8,["disabled"])])])}}},R={class:"flex flex-col gap-4 items-center"},G={__name:"ProfilePicture",setup(p){const o=I(),i=()=>{localStorage.removeItem("jwt_token"),o.push({name:"Login"})};return(r,l)=>(m(),f("div",R,[n(N),n(b,{onClick:i,color:"secondary",class:"flex gap-2 items-center sm:hidden"},{default:x(()=>[n(w(F),{class:"w-5 h-5 inline-block"}),l[0]||(l[0]=a("span",null,"Cerrar SesiÃ³n",-1))]),_:1}),n(j,{class:"sm:hidden"})]))}};export{G as default};
