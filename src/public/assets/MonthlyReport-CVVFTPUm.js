import{C,p as D,f as B,g as E,L as F,h as S,j as T,P as j,k as A}from"./index-BpTxhfog.js";import{j as L,l as O,h as _,A as I,y as k,q as f,i as q,H as G,c as b,a as e,t as u,u as o,b as N,F as P,r as U,o as x}from"./index-y-M-igMM.js";const V=async()=>await L.get("/stats/monthly"),v=O("monthlyReport",()=>{const c=_([]);return{monthlyData:c,fetchMonthlyReport:async()=>{const{data:r}=await V();c.value=r}}}),H=()=>{C.register(D,B,E,F,S,T,j);const c=new Intl.DateTimeFormat(navigator.language,{month:"long"}),{fetchMonthlyReport:g}=v(),{monthlyData:r}=I(v()),d=_("ingreso"),i=k(()=>{switch(d.value){case"ingreso":return"Ingresos";case"gasto":return"Gastos";case"saldo":return"Saldo";default:return""}}),y=a=>{const[s,n]=a.split("-"),t=new Date(s,n-1,1);return c.format(t).replace(/^\w/,l=>l.toUpperCase())},m=k(()=>{let a=[],s=[];r.value&&(a=Object.entries(r.value).map(([l,p])=>p[d.value]),s=Object.keys(r.value).map(l=>{const[p,M]=l.split("-"),w=new Date(p,M-1,1);return c.format(w).replace(/^\w/,R=>R.toUpperCase())}));let n,t;switch(d.value){case"ingreso":n="#4CAF50",t="#81C784";break;case"gasto":n="#F44336",t="#EF9A9A";break;case"saldo":n="#3F51B5",t="#7986CB";break;default:n="#9E9E9E",t="#E0E0E0"}return{labels:s,datasets:[{label:i.value,backgroundColor:t,borderColor:n,data:a,tension:.3}]}}),h=_({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,labels:{color:"#6B7280"}},tooltip:{callbacks:{label:function(a){let s=a.dataset.label||"";return s&&(s+=": "),a.parsed.y!==null&&(s+=f(a.parsed.y)),s}}}},scales:{x:{ticks:{color:"#6B7280"},grid:{color:"#6B7280"}},y:{ticks:{color:"#6B7280",callback:function(a){return f(a)}},grid:{color:"#6B7280"}}}});return{formatoMes:c,fetchMonthlyReport:g,monthlyData:r,formatearMes:y,chartData:m,formatoMoneda:f,chartOptions:h,reportType:d,reportTypeDisplay:i}},z={class:"p-2"},J={class:"text-center text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-4"},K={class:"bg-slate-100 dark:bg-gray-800 p-4 rounded-lg shadow-md"},Q={class:"mt-8"},W={class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-md mb-2 flex gap-4 items-center justify-between"},X={class:"text-lg font-semibold text-gray-800 dark:text-gray-200"},Y={class:"text-gray-600 dark:text-gray-300"},Z={class:"text-green-500 dark:text-green-400"},$={class:"text-gray-600 dark:text-gray-300"},tt={class:"text-red-500 dark:text-red-400"},et={class:"text-gray-600 dark:text-gray-300"},at={class:"text-indigo-500 dark:text-indigo-300"},rt={__name:"MonthlyReport",setup(c){const{fetchMonthlyReport:g,monthlyData:r,formatearMes:d,formatoMoneda:i,chartData:y,chartOptions:m,reportType:h,reportTypeDisplay:a}=H(),s=G();return q(()=>{h.value=s.query.type||"ingreso",g()}),(n,t)=>(x(),b("div",z,[e("h1",J," Reporte Mensual de "+u(o(a)),1),e("div",K,[N(o(A),{data:o(y),options:o(m)},null,8,["data","options"])]),e("div",Q,[t[3]||(t[3]=e("h2",{class:"text-center text-xl font-semibold text-gray-800 dark:text-gray-200 mb-4"},"Detalle Mensual",-1)),(x(!0),b(P,null,U(o(r),(l,p)=>(x(),b("div",{key:p,class:"mb-4 max-w-xl mx-auto"},[e("div",W,[e("h3",X,u(o(d)(p)),1),e("p",Y,[t[0]||(t[0]=e("span",null,"Ingresos: ",-1)),e("span",Z,u(o(i)(l.ingreso)),1)]),e("p",$,[t[1]||(t[1]=e("span",null,"Gastos: ",-1)),e("span",tt,u(o(i)(l.gasto)),1)]),e("p",et,[t[2]||(t[2]=e("span",null,"Saldo: ",-1)),e("span",at,u(o(i)(l.saldo)),1)])])]))),128))])]))}};export{rt as default};
