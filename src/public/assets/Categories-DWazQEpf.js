import{c as u,o as d,a as r,r as w,f as k,g as C,L as E,j as c,i as A,d as i,b as V,l as v,J as S,F as x,k as M,H as y,t as b}from"./index-p-_BGn28.js";import{S as a,_ as N,a as _}from"./BaseInput-Bb4mBZwM.js";import{u as B}from"./categoriesStore-DA59-nup.js";function $(o,l){return d(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{d:"M13.488 2.513a1.75 1.75 0 0 0-2.475 0L6.75 6.774a2.75 2.75 0 0 0-.596.892l-.848 2.047a.75.75 0 0 0 .98.98l2.047-.848a2.75 2.75 0 0 0 .892-.596l4.261-4.262a1.75 1.75 0 0 0 0-2.474Z"}),r("path",{d:"M4.75 3.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V9A.75.75 0 0 1 14 9v2.25A2.75 2.75 0 0 1 11.25 14h-6.5A2.75 2.75 0 0 1 2 11.25v-6.5A2.75 2.75 0 0 1 4.75 2H7a.75.75 0 0 1 0 1.5H4.75Z"})])}function U(o,l){return d(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"fill-rule":"evenodd",d:"M5 3.25V4H2.75a.75.75 0 0 0 0 1.5h.3l.815 8.15A1.5 1.5 0 0 0 5.357 15h5.285a1.5 1.5 0 0 0 1.493-1.35l.815-8.15h.3a.75.75 0 0 0 0-1.5H11v-.75A2.25 2.25 0 0 0 8.75 1h-1.5A2.25 2.25 0 0 0 5 3.25Zm2.25-.75a.75.75 0 0 0-.75.75V4h3v-.75a.75.75 0 0 0-.75-.75h-1.5ZM6.05 6a.75.75 0 0 1 .787.713l.275 5.5a.75.75 0 0 1-1.498.075l-.275-5.5A.75.75 0 0 1 6.05 6Zm3.9 0a.75.75 0 0 1 .712.787l-.275 5.5a.75.75 0 0 1-1.498-.075l.275-5.5a.75.75 0 0 1 .786-.711Z","clip-rule":"evenodd"})])}function Z(){const o=w(""),l=w(!1);let n=null;const s=B(),g=async()=>{if(l.value){p(n);return}try{if(o.value===""){a.fire({title:"Nombre Vacío",icon:"error",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"});return}a.fire({title:"Creando...",allowOutsideClick:!1,didOpen:()=>{a.showLoading()},theme:"auto"}),await C.post("/categories",{name:o.value}),a.fire({title:"Categoria Creada",icon:"success",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"}),o.value="",s.getCategories()}catch(e){console.error("Error creating category:",e),a.fire({title:"Error al crear categoria",text:e.response.data.error,icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}},f=async e=>{try{if(!(await a.fire({title:"Eliminar Categoria?",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",theme:"auto"})).isConfirmed){a.fire({title:"No se eliminó!",icon:"info",timer:2e3,theme:"auto",toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0});return}a.fire({title:"Eliminando...",allowOutsideClick:!1,didOpen:()=>{a.showLoading()},theme:"auto"}),await C.delete(`/categories/${e}`),s.getCategories(),a.fire({title:"Categoria Eliminada",icon:"success",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"})}catch(t){console.error("Error deleting category:",t),a.fire({title:"Error al eliminar categoria",text:t.response.data.error,icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}},m=e=>{const t=s.categories.findIndex(h=>h.id===e);t!==-1&&(o.value=s.categories[t].name,s.categories.splice(t,1),l.value=!0,n=e)},p=async e=>{try{const t=await C.put(`/categories/${e}`,{name:o.value});console.log("Category updated:",t.data),s.getCategories(),l.value=!1,n=null,o.value=""}catch(t){console.error("Error updating category:",t)}};return k(async()=>s.getCategories()),{name:o,createCategory:g,deleteCategory:f,updateCategory:p,onUpdateCategory:m,isUpdate:l}}const H={class:"flex flex-col gap-8"},L={class:"flex gap-2"},O={class:"dark:text-white w-fit table-auto border-collapse whitespace-nowrap m-auto overflow-auto text-xl"},P={class:"p-4"},T={class:"p-4 flex gap-4"},D=["onClick"],F=["onClick"],J={__name:"Categories",setup(o){const l=B(),{name:n,createCategory:s,deleteCategory:g,onUpdateCategory:f,isUpdate:m}=Z();return(p,e)=>(d(),u(x,null,[e[4]||(e[4]=r("h1",{class:"dark:text-white font-bold text-xl"},"Categorias",-1)),r("div",H,[r("form",{onSubmit:e[1]||(e[1]=E((...t)=>i(s)&&i(s)(...t),["prevent"])),class:"shadow-md p-2 rounded dark:bg-gray-800 bg-slate-100 flex gap-2 dark:text-gray-300 items-start w-fit m-auto"},[c(N,{modelValue:i(n),"onUpdate:modelValue":e[0]||(e[0]=t=>A(n)?n.value=t:null),modelModifiers:{trim:!0},placeholder:"Nombre de categoria"},null,8,["modelValue"]),r("div",L,[c(_,{type:"submit"},{default:v(()=>[y(b(i(m)?"Actualizar":"Crear"),1)]),_:1}),V(c(_,{type:"cancel",color:"danger"},{default:v(()=>e[2]||(e[2]=[y("Cancelar")])),_:1},512),[[S,i(m)]])])],32),r("table",O,[e[3]||(e[3]=r("thead",null,[r("tr",{class:"border-b border-gray-400"},[r("th",null,"Nombre"),r("th",null,"Acciones")])],-1)),r("tbody",null,[(d(!0),u(x,null,M(i(l).categories,t=>(d(),u("tr",{class:"border-b border-gray-300",key:t.id},[r("td",P,b(t.name),1),r("td",T,[r("button",{onClick:h=>i(g)(t.id),class:"text-red-500 hover:text-red-700 cursor-pointer",title:"Eliminar categoria"},[c(i(U),{class:"h-5 w-5"})],8,D),r("button",{onClick:h=>i(f)(t.id),class:"text-blue-500 hover:text-blue-700 cursor-pointer",title:"Editar categoria"},[c(i($),{class:"h-5 w-5"})],8,F)])]))),128))])])])],64))}};export{J as default};
