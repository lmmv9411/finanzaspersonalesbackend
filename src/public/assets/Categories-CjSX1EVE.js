import{c as u,o as d,a,r as v,b,d as C,f as c,G as k,k as s,I as E,w,J as V,L as A,F as S,g as M,C as x,t as y}from"./index-CWDtl1vW.js";import{S as r,_ as $}from"./BaseInput-CWm6VfUn.js";import{u as B}from"./categoriesStore-BvUloooz.js";import{_}from"./BaseButton-Bj2Nk-yF.js";function N(o,n){return d(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{d:"M13.488 2.513a1.75 1.75 0 0 0-2.475 0L6.75 6.774a2.75 2.75 0 0 0-.596.892l-.848 2.047a.75.75 0 0 0 .98.98l2.047-.848a2.75 2.75 0 0 0 .892-.596l4.261-4.262a1.75 1.75 0 0 0 0-2.474Z"}),a("path",{d:"M4.75 3.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V9A.75.75 0 0 1 14 9v2.25A2.75 2.75 0 0 1 11.25 14h-6.5A2.75 2.75 0 0 1 2 11.25v-6.5A2.75 2.75 0 0 1 4.75 2H7a.75.75 0 0 1 0 1.5H4.75Z"})])}function U(o,n){return d(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"fill-rule":"evenodd",d:"M5 3.25V4H2.75a.75.75 0 0 0 0 1.5h.3l.815 8.15A1.5 1.5 0 0 0 5.357 15h5.285a1.5 1.5 0 0 0 1.493-1.35l.815-8.15h.3a.75.75 0 0 0 0-1.5H11v-.75A2.25 2.25 0 0 0 8.75 1h-1.5A2.25 2.25 0 0 0 5 3.25Zm2.25-.75a.75.75 0 0 0-.75.75V4h3v-.75a.75.75 0 0 0-.75-.75h-1.5ZM6.05 6a.75.75 0 0 1 .787.713l.275 5.5a.75.75 0 0 1-1.498.075l-.275-5.5A.75.75 0 0 1 6.05 6Zm3.9 0a.75.75 0 0 1 .712.787l-.275 5.5a.75.75 0 0 1-1.498-.075l.275-5.5a.75.75 0 0 1 .786-.711Z","clip-rule":"evenodd"})])}function Z(){const o=v(""),n=v(!1);let l=null;const i=B(),g=async()=>{if(n.value){p(l);return}try{if(o.value===""){r.fire({title:"Nombre Vacío",icon:"error",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"});return}r.fire({title:"Creando...",allowOutsideClick:!1,didOpen:()=>{r.showLoading()},theme:"auto"}),await C.post("/categories",{name:o.value}),r.fire({title:"Categoria Creada",icon:"success",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"}),o.value="",i.getCategories()}catch(t){console.error("Error creating category:",t),r.fire({title:"Error al crear categoria",text:t.response.data.error,icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}},f=async t=>{try{if(!(await r.fire({title:"Eliminar Categoria?",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",theme:"auto"})).isConfirmed){r.fire({title:"No se eliminó!",icon:"info",timer:2e3,theme:"auto",toast:!0,position:"top",showConfirmButton:!1,timerProgressBar:!0});return}r.fire({title:"Eliminando...",allowOutsideClick:!1,didOpen:()=>{r.showLoading()},theme:"auto"}),await C.delete(`/categories/${t}`),i.getCategories(),r.fire({title:"Categoria Eliminada",icon:"success",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,theme:"auto"})}catch(e){console.error("Error deleting category:",e),r.fire({title:"Error al eliminar categoria",text:e.response.data.error,icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}},m=t=>{const e=i.categories.findIndex(h=>h.id===t);e!==-1&&(o.value=i.categories[e].name,i.categories.splice(e,1),n.value=!0,l=t)},p=async t=>{try{const e=await C.put(`/categories/${t}`,{name:o.value});console.log("Category updated:",e.data),i.getCategories(),n.value=!1,l=null,o.value=""}catch(e){console.error("Error updating category:",e)}};return b(async()=>i.getCategories()),{name:o,createCategory:g,deleteCategory:f,updateCategory:p,onUpdateCategory:m,isUpdate:n}}const L={class:"pt-4 flex flex-col gap-8"},H={class:"flex gap-2"},O={class:"container max-w-xs mx-auto flex gap-4 flex-col"},P={class:"text-xl border gap-4 border-gray-200 dark:border-gray-600 rounded-lg flex justify-between p-4 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors duration-300 shadow-sm"},T={class:"flex gap-2"},D=["onClick"],F=["onClick"],I={__name:"Categories",setup(o){const n=B(),{name:l,createCategory:i,deleteCategory:g,onUpdateCategory:f,isUpdate:m}=Z();return(p,t)=>(d(),u("div",L,[a("form",{onSubmit:t[1]||(t[1]=A((...e)=>s(i)&&s(i)(...e),["prevent"])),class:"shadow-md p-2 rounded dark:bg-gray-800 bg-slate-100 flex gap-2 dark:text-gray-300 items-start w-fit m-auto"},[c($,{modelValue:s(l),"onUpdate:modelValue":t[0]||(t[0]=e=>k(l)?l.value=e:null),modelModifiers:{trim:!0},placeholder:"Nombre de categoria"},null,8,["modelValue"]),a("div",H,[c(_,{type:"submit"},{default:w(()=>[x(y(s(m)?"Actualizar":"Crear"),1)]),_:1}),E(c(_,{type:"cancel",color:"danger"},{default:w(()=>t[2]||(t[2]=[x("Cancelar")])),_:1},512),[[V,s(m)]])])],32),a("div",O,[(d(!0),u(S,null,M(s(n).categories,e=>(d(),u("div",{key:e.id},[a("div",P,[a("span",null,y(e.name),1),a("div",T,[a("button",{onClick:h=>s(g)(e.id),class:"text-red-500 hover:text-red-700 cursor-pointer",title:"Eliminar categoria"},[c(s(U),{class:"h-5 w-5"})],8,D),a("button",{onClick:h=>s(f)(e.id),class:"text-blue-500 hover:text-blue-700 cursor-pointer",title:"Editar categoria"},[c(s(N),{class:"h-5 w-5"})],8,F)])])]))),128))])]))}};export{I as default};
