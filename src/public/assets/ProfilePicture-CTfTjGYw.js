import{c as d,o as f,a as r,r as l,B as c,b as v,d as m,t as b,f as s,w,k as x}from"./index-CF7U3Sn9.js";import{_ as k}from"./BaseButton-Cq4GcSSo.js";import{_ as y}from"./ToggleTheme-C8K81rUa.js";function C(p,o){return f(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})])}const S={class:"min-w-xs mx-auto mt-10 p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-lg"},$={class:"flex flex-col items-center gap-4"},B=["src"],F=["disabled"],P={__name:"ProfilePictureUploader",setup(p){const o=l(`${c}/uploads/default.jpg`),i=l(null),t=l(null),u=l(null),n=l(!1);function g(){i.value.click()}function _(a){const e=a.target.files[0];e&&(t.value=e,u.value=URL.createObjectURL(e))}async function h(){if(!t.value)return;n.value=!0;const a=new FormData;a.append("image",t.value);try{const{data:e}=await m.post("/user/upload-profile-pic",a,{headers:{"Content-Type":"multipart/form-data"}});e.url?(o.value=`${c}${e.url}`,u.value=null,t.value=null):Swal.fire({title:"Error al subir foto",icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}catch(e){console.error(e),Swal.fire({title:"Error al subir foto",text:e.response.data.error,icon:"error",timer:3e3,showConfirmButton:!1,theme:"auto"})}finally{n.value=!1}}return v(async()=>{const{data:a}=await m.get("/user");o.value=`${c}${a.profilePicture}`}),(a,e)=>(f(),d("div",S,[e[0]||(e[0]=r("h2",{class:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-100 text-center"},"Subir Foto de Perfil",-1)),r("div",$,[r("img",{src:u.value||o.value,alt:"Foto de perfil",class:"w-32 h-32 rounded-full object-cover border-4 border-gray-300 dark:border-gray-600 shadow"},null,8,B),r("input",{ref_key:"fileInput",ref:i,type:"file",accept:"image/*",class:"hidden",onChange:_},null,544),r("button",{onClick:g,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"}," Seleccionar imagen "),r("button",{onClick:h,disabled:!t.value||n.value,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition"},b(n.value?"Subiendo...":"Guardar"),9,F)])]))}},j={class:"flex flex-col gap-4 items-center"},L={__name:"ProfilePicture",setup(p){const o=()=>{localStorage.removeItem("jwt_token"),router.push({name:"Login"})};return(i,t)=>(f(),d("div",j,[s(P),s(k,{onClick:o,class:"flex gap-2 items-center sm:hidden"},{default:w(()=>[s(x(C),{class:"w-5 h-5 inline-block"}),t[0]||(t[0]=r("span",null,"Cerrar SesiÃ³n",-1))]),_:1}),s(y,{class:"sm:hidden"})]))}};export{L as default};
